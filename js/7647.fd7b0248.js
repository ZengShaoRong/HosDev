"use strict";(self["webpackChunkvue_arcgis_0905"]=self["webpackChunkvue_arcgis_0905"]||[]).push([[7647],{1100:function(t,e,n){n.d(e,{BI:function(){return m},D3:function(){return h},XJ:function(){return y},lc:function(){return f},mX:function(){return v},rU:function(){return g},tH:function(){return I}});var r=n(45557);const i="__begin__",o="__end__",s=new RegExp(i,"ig"),u=new RegExp(o,"ig"),a=new RegExp("^"+i,"i"),c=new RegExp(o+"$","i"),l='"',d=l+" + ",p=" + "+l;function f(t){return t.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}function h(t){return t.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function y(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):null!=t.labelExpression&&(e.expression=f(t.labelExpression),e.type="conventional"),e}function m(t){const e=y(t);if(!e)return null;switch(e.type){case"conventional":return v(e.expression);case"arcade":return e.expression}return null}function g(t){const e=y(t);if(!e)return null;switch(e.type){case"conventional":return _(e.expression);case"arcade":return I(e.expression)}return null}function v(t){let e;return t?(e=(0,r.HC)(t,(t=>i+'$feature["'+t+'"]'+o)),e=a.test(e)?e.replace(a,""):l+e,e=c.test(e)?e.replace(c,""):e+l,e=e.replaceAll(s,d).replaceAll(u,p)):e='""',e}const b=/^\s*\{([^}]+)\}\s*$/i;function _(t){const e=t?.match(b);return e?.[1].trim()||null}const w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*$/i,x=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])(.+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,M=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(.+)(\1)\s*\));?\s*$/i;function I(t){if(!t)return null;let e=w.exec(t)||x.exec(t);return e?e[1]||e[3]:(e=M.exec(t),e?e[2]:null)}},27435:function(t,e,n){n.d(e,{$:function(){return r},s:function(){return i}});const r=15.5,i=1024},57242:function(t,e,n){n.d(e,{D:function(){return i},K:function(){return r}});const r={color:[128,128,128,1],outlinecolor:[0,0,0,1],backgroundcolor:[128,128,128,1],borderlinecolor:[0,0,0,1],tintcolor:[255,255,255,1]},i={CIMVectorMarker:{scalesymbolsproportionally:!1,respectframe:!0,anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMPictureMarker:{scalex:1,texturefilter:"Draft",anchorpointunits:"Relative",offsetx:0,offsety:0,rotateclockwise:!1,rotation:0,size:10,enable:!0,colorlocked:!1},CIMTextSymbol:{angle:0,anglex:0,angley:0,halosize:1,height:10,horizontalalignment:"Left",kerning:!0,letterspacing:0,letterwidth:100,ligatures:!0,linegap:0,offsetx:0,offsety:0,strikethrough:!1,textcase:"Normal",textstring:"",underline:!1,verticalalignment:"Bottom",enable:!0,colorlocked:!1},CIMSolidStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMPictureStroke:{texturefilter:"Draft",capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMGradientStroke:{capstyle:"Round",joinstyle:"Round",miterlimit:4,width:4,enable:!0,colorlocked:!1},CIMSolidFill:{enable:!0,colorlocked:!1},CIMPictureFill:{offsetx:0,offsety:0,rotation:0,scalex:1,height:10,texturefilter:"Draft",enable:!0,colorlocked:!1},CIMHatchFill:{offsetx:0,offsety:0,rotation:0,separation:4,enable:!0,colorlocked:!1},CIMGeometricEffectAddControlPoints:{angletolerance:120},CIMGeometricEffectArrow:{arrowtype:"OpenEnded",width:5},CIMGeometricEffectBuffer:{size:1},CIMGeometricEffectCut:{begincut:1,endcut:1,middlecut:0,invert:!1},CIMGeometricEffectDashes:{customendingoffset:0,linedashending:"NoConstraint",offsetalongline:0},CIMGeometricEffectDonut:{method:"Mitered",option:"Accurate",width:2},CIMGeometricEffectJog:{angle:225,length:20,position:50},CIMGeometricEffectControlMeasureLine:{rule:"FullGeometry"},CIMGeometricEffectMove:{offsetx:1,offsety:-1},CIMGeometricEffectOffset:{method:"Square",offset:1,option:"Fast"},CIMGeometricEffectRotate:{angle:15},CIMGeometricEffectScale:{xscalefactor:1.15,yscalefactor:1.15},CIMGeometricEffectWave:{amplitude:2,period:3,seed:1,waveform:"Sinus"},CIMMarkerPlacementAlongLine:{customendingoffset:0,endings:"WithHalfGap",offsetalongline:0,placeperpart:!0,angletoline:!0,offset:0},CIMMarkerPlacementAtExtremities:{extremityplacement:"Both",offsetalongline:0,angletoline:!0,offset:0},CIMMarkerPlacementAtRatioPositions:{beginposition:0,endposition:0,flipfirst:!0,angletoline:!0,offset:0},CIMMarkerPlacementInsidePolygon:{gridangle:0,gridtype:"Fixed",offsetx:0,offsety:0,randomness:100,seed:0,shiftoddrows:!1,stepx:16,stepy:16,clipping:"ClipAtBoundary"},CIMMarkerPlacementOnLine:{relativeto:"LineMiddle",startpointoffset:0,angletoline:!0,offset:0},CIMMarkerPlacementOnVertices:{placeperpart:!0,placeoncontrolpoints:!0,placeonendpoints:!0,placeonregularvertices:!0,angletoline:!0,offset:0},CIMMarkerPlacementPolygonCenter:{method:"OnPolygon",offsetx:0,offsety:0,clipatboundary:!1},CIMAnimatedSymbolProperties:{playanimation:!1,reverseanimation:!1,randomizestarttime:!1,randomizestartseed:0,starttimeoffset:0,duration:3,endingduration:3,useendingduration:!1,repeattype:"Loop",repeatdelay:0}}},80139:function(t,e,n){n.d(e,{$w:function(){return g},Bu:function(){return T},DW:function(){return C},FM:function(){return a},G9:function(){return i},GV:function(){return v},Go:function(){return l},K3:function(){return L},Kn:function(){return M},MM:function(){return f},MO:function(){return R},Nl:function(){return $},Ny:function(){return b},O2:function(){return A},UE:function(){return F},YC:function(){return U},YF:function(){return z},ZO:function(){return D},_1:function(){return P},_H:function(){return w},_d:function(){return I},bs:function(){return E},e6:function(){return d},gQ:function(){return u},iA:function(){return O},jn:function(){return y},lW:function(){return p},mA:function(){return h},n5:function(){return V},pM:function(){return S},pV:function(){return x},pk:function(){return K},rB:function(){return B},xo:function(){return k},yH:function(){return _},zb:function(){return N},zr:function(){return m}});n(44114);var r=n(57242);function i(t){return[t.r,t.g,t.b,t.a]}const o=" /-,\n";function s(t){let e=t.length;for(;e--;)if(!o.includes(t.charAt(e)))return!1;return!0}function u(t,e){const n=[];let r=0,i=-1;do{if(i=t.indexOf("[",r),i>=r){if(i>r){const e=t.substr(r,i-r);n.push([e,null,s(e)])}if(r=i+1,i=t.indexOf("]",r),i>=r){if(i>r){const o=e[t.substr(r,i-r)];o&&n.push([null,o,!1])}r=i+1}}}while(-1!==i);if(r<t.length-1){const e=t.substr(r);n.push([e,null,s(e)])}return n}function a(t,e,n,r){let i="",o=null;for(const s of e){const[e,r,u]=s;if(e)u?o=e:(o&&(i+=o,o=null),i+=e);else{let e=r;null!=n&&(e=R(r,n));const s=t.attributes[e];s&&(o&&(i+=o,o=null),i+=s)}}return c(i,r)}function c(t,e){switch("string"!=typeof t&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function l(t,e,n,r,i,o,s=!0){const u=e/i,a=n/o,c=Math.ceil(u/2),l=Math.ceil(a/2);for(let d=0;d<o;d++)for(let n=0;n<i;n++){const p=4*(n+(s?o-d-1:d)*i);let f=0,h=0,y=0,m=0,g=0,v=0,b=0;const _=(d+.5)*a;for(let r=Math.floor(d*a);r<(d+1)*a;r++){const i=Math.abs(_-(r+.5))/l,o=(n+.5)*u,s=i*i;for(let a=Math.floor(n*u);a<(n+1)*u;a++){let n=Math.abs(o-(a+.5))/c;const i=Math.sqrt(s+n*n);i>=-1&&i<=1&&(f=2*i*i*i-3*i*i+1,f>0&&(n=4*(a+r*e),b+=f*t[n+3],y+=f,t[n+3]<255&&(f=f*t[n+3]/250),m+=f*t[n],g+=f*t[n+1],v+=f*t[n+2],h+=f))}}r[p]=m/h,r[p+1]=g/h,r[p+2]=v/h,r[p+3]=b/y}}function d(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function p(t){return t.data?.symbol??null}function f(t){return"CIMVectorMarker"===t.type||"CIMPictureMarker"===t.type||"CIMBarChartMarker"===t.type||"CIMCharacterMarker"===t.type||"CIMPieChartMarker"===t.type||"CIMStackedBarChartMarker"===t.type}function h(t){return"CIMGradientStroke"===t.type||"CIMPictureStroke"===t.type||"CIMSolidStroke"===t.type}function y(t){return null!=t&&("CIMGradientFill"===t.type||"CIMHatchFill"===t.type||"CIMPictureFill"===t.type||"CIMSolidFill"===t.type||"CIMWaterFill"===t.type)}function m(t){return null!=t&&("CIMMarkerPlacementAlongLineRandomSize"===t.type||"CIMMarkerPlacementAlongLineSameSize"===t.type||"CIMMarkerPlacementAlongLineVariableSize"===t.type||"CIMMarkerPlacementAtExtremities"===t.type||"CIMMarkerPlacementAtMeasuredUnits"===t.type||"CIMMarkerPlacementAtRatioPositions"===t.type||"CIMMarkerPlacementOnLine"===t.type||"CIMMarkerPlacementOnVertices"===t.type)}const g=(t,e=0)=>null==t||isNaN(t)?e:t,v=(t,e)=>t??e,b=t=>t.tintColor?d(t.tintColor):[255,255,255,1],_=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function w(){return n.e(2749).then(n.bind(n,42749))}function x(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function M(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function I(t){let e="normal",n="normal";if(t){const r=t.toLowerCase();r.includes("italic")?e="italic":r.includes("oblique")&&(e="oblique"),r.includes("bold")?n="bold":r.includes("light")&&(n="lighter")}return{style:e,weight:n}}function C(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function S(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const t=S(e);if(null!=t)return t}break;case"CIMTextSymbol":return S(t.symbol);case"CIMSolidFill":return t.color}return null}function P(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const t of e){const e=P(t);if(null!=e)return e}break}case"CIMTextSymbol":return P(t.symbol);case"CIMSolidStroke":return t.color}}function k(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const t=k(e);if(void 0!==t)return t}break;case"CIMTextSymbol":return k(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function T(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function $(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function A(t){return(t?Object.keys(t):[]).map((e=>({name:e,alias:e,type:"string"==typeof t[e]?"esriFieldTypeString":"esriFieldTypeDouble"})))}const F=t=>t.includes("data:image/svg+xml");function V(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function z(t){return t?t.charAt(0).toLowerCase()+t.substring(1):t}function N(t,e,n,r,i,o){const{infos:s}=o;let u=1,a=0,c=0,l=0;for(const{offsetX:f,offsetY:h,rotation:y,size:m,frameHeight:g,rotateClockWise:v}of s)c=j(f,h,a,u,c),l=Z(f,h,a,u,l),g&&(u*=m/g),a=G(y,v,a);const d=j(r,i,a,u,c),p=Z(r,i,a,u,l);return{size:t*u,rotation:G(e,n,a),offsetX:d,offsetY:p}}function D(t){if(null==t)return!1;if(Array.isArray(t))return t.every((t=>D(t)));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function O(t,e){if("color"===e||"outlinecolor"===e||"backgroundcolor"===e||"borderlinecolor"===e||"tintcolor"===e)return[...r.K[e]];const n=r.D[t];if(!n)throw new Error(`InternalError: default value for type ${t}.`);return n[e]}function L(t){return t?.dashTemplate&&"string"==typeof t.dashTemplate&&(t.dashTemplate=t.dashTemplate.split(" ").map(Number)),t}function E(t){if(null==t)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const e=t.symbolLayers;if(!e)return"Normal";for(const t of e)if("CIMVectorMarker"===t.type)return E(t)}break;case"CIMVectorMarker":{const e=t.markerGraphics;if(!e)return"Normal";for(const t of e)if(t.symbol)return E(t.symbol)}}return"Normal"}function U(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers)for(const n of t.symbolLayers)if(n)switch(n.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{const t=n.size??r.D.CIMVectorMarker.size;t>e&&(e=t);break}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers)for(const n of t.symbolLayers)if(n)switch(n.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{const t=n.width;null!=t&&t>e&&(e=t);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(n.markerPlacement&&m(n.markerPlacement)){const t=n.size??r.D.CIMVectorMarker.size;t>e&&(e=t)}break;case"CIMPictureFill":{const t=n.height;null!=t&&t>e&&(e=t)}}return e}}}function R(t,e){if(null!==e){const n=e.get(t);return n?n.name:t}return t}function K(t){return t.map((t=>({...t,propertyName:z(t.propertyName)})))}function B(t){const e={};for(const n in t){const r=t[n];e[z(n)]=r}return e}function Z(t,e,n,r,i){const o=n*Math.PI/180;if(o){const n=Math.cos(o);return(Math.sin(o)*t+n*e)*r+i}return e*r+i}function j(t,e,n,r,i){const o=n*Math.PI/180;return o?(Math.cos(o)*t-Math.sin(o)*e)*r+i:t*r+i}function G(t,e,n){return e?n-t:n+t}},18662:function(t,e,n){n.d(e,{KQ:function(){return r},Q4:function(){return o},Ss:function(){return s}});const r=8388607,i=8388608,o=t=>t&r;function s(t,e){return((e?i:0)|t)>>>0}},80748:function(t,e,n){n.d(e,{Y7:function(){return U},HS:function(){return R},mm:function(){return K},A:function(){return Z},k2:function(){return B},ZA:function(){return E},E8:function(){return O},hF:function(){return z},C5:function(){return F},uK:function(){return D},Pi:function(){return N}});n(44114),n(17642),n(58004),n(33853),n(45876),n(32475),n(15024),n(31698);var r=n(40399),i=(n(9302),n(8660)),o=n(45557),s=n(18244),u=n(86989),a=n(24394);const c=()=>i.A.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class l{constructor(){this._includedModules=new Map}include(t,e){this._includedModules.has(t)?this._includedModules.get(t):(this._includedModules.set(t,e),t(this.builder,e))}}class d extends l{constructor(){super(...arguments),this.vertex=new h,this.fragment=new h,this.attributes=new y,this.varyings=new m,this.extensions=new g,this.constants=new v}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t,e=!0){const n=this.extensions.generateSource(t),r=this.attributes.generateSource(t),i=this.varyings.generateSource(t),o="vertex"===t?this.vertex:this.fragment,s=o.uniforms.generateSource(),u=o.code.generateSource(),a="vertex"===t?_:b(e),c=this.constants.generateSource().concat(o.constants.generateSource());return`${e?"#version 300 es":""}\n${n.join("\n")}\n${a}\n${c.join("\n")}\n${s.join("\n")}\n${r.join("\n")}\n${i.join("\n")}\n${u.join("\n")}`}generateBindPass(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[u.c.Pass];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[u.c.Pass];n&&e.set(t.name,n)}));const n=Array.from(e.values()),r=n.length;return(e,i)=>{for(let o=0;o<r;++o)n[o](t,e,i)}}generateBindDraw(t){const e=new Map;this.vertex.uniforms.entries.forEach((t=>{const n=t.bind[u.c.Draw];n&&e.set(t.name,n)})),this.fragment.uniforms.entries.forEach((t=>{const n=t.bind[u.c.Draw];n&&e.set(t.name,n)}));const n=Array.from(e.values()),r=n.length;return(e,i,o)=>{for(let s=0;s<r;++s)n[s](t,e,i,o)}}}class p{constructor(){this._entries=new Map}add(...t){for(const e of t)this._add(e)}get(t){return this._entries.get(t)}_add(t){if(null!=t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new s.A(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}else c().error(`Trying to add null Uniform from ${(new Error).stack}.`)}generateSource(){return Array.from(this._entries.values()).map((t=>null!=t.arraySize?`uniform ${t.type} ${t.name}[${t.arraySize}];`:`uniform ${t.type} ${t.name};`))}get entries(){return Array.from(this._entries.values())}}class f{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class h extends l{constructor(){super(...arguments),this.uniforms=new p,this.code=new f,this.constants=new v}get builder(){return this}}class y{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>`in ${t[1]} ${t[0]};`))}}class m{constructor(){this._entries=new Map}add(t,e){this._entries.has(t)&&(0,a.vA)(this._entries.get(t)===e),this._entries.set(t,e)}generateSource(t){const e=new Array;return this._entries.forEach(((n,r)=>e.push("vertex"===t?`out ${n} ${r};`:`in ${n} ${r};`))),e}}class g{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?g.ALLOWLIST_VERTEX:g.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>`#extension ${t} : enable`))}}g.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],g.ALLOWLIST_VERTEX=[];class v{constructor(){this._entries=new Set}add(t,e,n){let r="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":r=v._numberToFloatStr(n);break;case"int":r=v._numberToIntStr(n);break;case"bool":r=n.toString();break;case"vec2":r=`vec2(${v._numberToFloatStr(n[0])},                            ${v._numberToFloatStr(n[1])})`;break;case"vec3":r=`vec3(${v._numberToFloatStr(n[0])},                            ${v._numberToFloatStr(n[1])},                            ${v._numberToFloatStr(n[2])})`;break;case"vec4":r=`vec4(${v._numberToFloatStr(n[0])},                            ${v._numberToFloatStr(n[1])},                            ${v._numberToFloatStr(n[2])},                            ${v._numberToFloatStr(n[3])})`;break;case"ivec2":r=`ivec2(${v._numberToIntStr(n[0])},                             ${v._numberToIntStr(n[1])})`;break;case"ivec3":r=`ivec3(${v._numberToIntStr(n[0])},                             ${v._numberToIntStr(n[1])},                             ${v._numberToIntStr(n[2])})`;break;case"ivec4":r=`ivec4(${v._numberToIntStr(n[0])},                             ${v._numberToIntStr(n[1])},                             ${v._numberToIntStr(n[2])},                             ${v._numberToIntStr(n[3])})`;break;case"mat2":case"mat3":case"mat4":r=`${e}(${Array.prototype.map.call(n,(t=>v._numberToFloatStr(t))).join(", ")})`}return this._entries.add(`const ${e} ${t} = ${r};`),this}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}function b(t=!0){return`#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif\n${t?"out vec4 fragColor;":""}\n`}const _="precision highp float;\nprecision highp sampler2D;";var w=n(9808);const x=5;function M(t,e,n){const r=e.split("\n");for(const i of r)if(i.trim().length){{let e="";null!=n&&(e+=`/*id:${n??"000"}*/   `),t.body+=e.padEnd(14)}t.body+=" ".repeat(t.indent)+i+"\n"}}class I{write(t){for(const e of t.rootOutputNodes())t.shouldPruneOutputNode(e)||(e.variableName=this._write(t,e.node));return t}_createVarName(t,e){let n="";return"boolean"!=typeof e&&"number"!=typeof e&&e.debugInfo.name&&(n=`${e.debugInfo.name}_`),`${n}v${t.varCount++}`}_write(t,e,n=!1){if("number"==typeof e)return e.toString();if("boolean"==typeof e)return e.toString();let r=t.getEmit(e);if(r)return r;switch(e.shaderType){case"scope-node":r=this._writeScopeNode(t,e);break;case"primitive-node":r=this._writePrimitiveNode(t,e,n);break;case"function-node":r=this._writeFunctionNode(t,e);break;case"property-access-node":r=this._writePropertyAccessNode(t,e);break;case"text-node":r=e.text;break;case"block-node":r=this._writeBlockNode(t,e);break;case"condition-node":r=this._writeConditionNode(t,e)}return t.setEmit(e,r),r}_writeScopeNode(t,e){const n=new e.child.constructor;n.setDebugName(e.debugInfo.name);const r=this._write(t,n,!0);return M(t,`{ /*ScopeStart: ${e.uid} ${e.debugInfo.name}*/`),t.indent+=2,M(t,`${r} = ${this._write(t,e.child)};`),t.indent-=2,M(t,`} /*ScopeEnd: ${e.uid} ${e.debugInfo.name}*/`),r}_writeConditionNode(t,e){const n=new e.ifTrue.constructor,r=this._write(t,n,!0);M(t,`if (${this._write(t,e.condition)}) {`),t.indent+=2;const i=t.createSubgraphContext(),o=this._write(i,e.ifTrue);if(t.body+=i.body,o&&M(t,`${r} = ${o};`),t.indent-=2,M(t,"}"),e.ifFalse){M(t,"else {"),t.indent+=2;const n=t.createSubgraphContext(),i=this._write(n,e.ifFalse);t.body+=n.body,i&&M(t,`${r} = ${i};`),t.indent-=2,M(t,"}")}return r}_writeBlockNode(t,e){const{captureList:n,generator:r,returnType:i}=e,o={};for(const c in n){if(!n[c])continue;const e=this._write(t,n[c]);o[c]=e}const s=new i,u=this._write(t,s,!0);if(o.out=u,e.subgraph){const n=t.createSubgraphContext(),r=this._write(n,e.subgraph.child),i=n.body;o.subgraph={varName:r,body:i}}const a=r(o);return M(t,"{\n"),t.indent+=2,M(t,a),t.indent-=2,M(t,"}\n"),u}_writePropertyAccessNode(t,e){const n=this._write(t,e.target);return"string"==typeof e.property&&e.property.includes("[")?`${n}${e.property}`:"string"!=typeof e.property?`${n}[${this._write(t,e.property)}]`:`${n}.${e.property}`}_writeFunctionNode(t,e){const n=e.returnType.type;if(e.isInfix){const[r,i]=e.children.map((e=>this._write(t,e))),o=this._createVarName(t,e);return M(t,`${n.padEnd(x)} ${o} = ${r} ${e.token} ${i};`,e.uid),o}const r=e.children.map((e=>this._write(t,e))).join(", "),i=this._createVarName(t,e);return M(t,`${n.padEnd(x)} ${i} = ${e.token}(${r});`,e.uid),i}_writePrimitiveNode(t,e,n=!1){const r=t.getInput(e);if(r)return r.isUsed=!0,r.variableName;const i=1===e.children.length&&e.children[0]?.type===e.type;if(e.isImplicit||i)return this._write(t,e.children[0]);const o=this._createVarName(t,e);if(n)return M(t,`${e.type.padEnd(x)} ${o};`,e.uid),o;const s=!e.debugInfo.name&&!e.isMutable;if(s&&"float"===e.type&&"number"==typeof e.children[0])return Number.isInteger(e.children[0])?e.children[0].toFixed(1):e.children[0].toString();if(s&&"int"===e.type&&"number"==typeof e.children[0]&&Number.isInteger(e.children[0]))return e.children[0].toString();const u=e.children.map((e=>this._write(t,e))).join(", ");return"array"===e.type?(M(t,`${e.type.padEnd(x)} ${o} = [${u}];`,e.uid),o):s?`${e.type}(${u})`:(M(t,`${e.type.padEnd(x)} ${o} = ${e.type}(${u});`,e.uid),o)}}var C=n(72649);class S{constructor(t,e,n){this.variableName=t,this.variableInputType=e,this.node=n,this.type="shader-input",this.isUsed=!1}clone(){return new S(this.variableName,this.variableInputType,(0,C.vA)(this.node))}}class P{constructor(t,e,n){this.outVariableName=t,this.outVariableType=e,this.node=n,this.type="shader-output"}clone(){const t=new P(this.outVariableName,this.outVariableType,(0,C.vA)(this.node));return t.variableName=this.variableName,t}}class k{static createVertex(t,e,n,r,i,o){const s=[];for(const a in t){const e=t[a],r=n.get(a);r?s.push(new S(r,"builtin",e)):s.push(new S("a_"+a,"attribute",e))}for(const a of r){const t=a.uniformHydrated;s.push(new S(a.uniformName,"uniform",t))}const u=[];for(const a in e){const t=e[a];"glPosition"===a?u.push(new P("gl_Position","builtin",t)):"glPointSize"===a?u.push(new P("gl_PointSize","builtin",t)):u.push(new P("v_"+a,"varying",t))}return new k(s,u,i,o)}static createFragment(t,e,n,r,i,o){const s=[],u=Array.from(i.rootOutputNodes());for(const c in t){const e=t[c],r=n.get(c);if(r){s.push(new S(r,"builtin",e));continue}const i=u.find((t=>t.node===e));i&&s.push(new S(i.outVariableName,i.outVariableType,e))}for(const c of r){const t=c.uniformHydrated;s.push(new S(c.uniformName,"uniform",t))}const a=[];for(const c in e){const t=e[c],r=n.get(c);if("discard"===c)a.push(new P(null,"discard",t));else{if(!r)throw new Error(`Member ${c} in shader fragment output shoule be tagged as builtin`);a.push(new P(r,"builtin",t))}}return new k(s,a,o)}constructor(t,e,n,r){this.type="shader-graph-context",this.indent=0,this.body="",this.varCount=0,this._inputShaderTypesByNodeUid=new Map,this._nodeEmitMap=new Map;for(const i of t)this._inputShaderTypesByNodeUid.set(i.node.uid,i);this._outputShaderTypes=e,this._transformFeedbackBindings=n,this._transformFeedbackNames=new Set(n.map((t=>"v_"+t.propertyKey))),this._usedInFragmentShader=r}shouldPruneOutputNode(t){return!!this._usedInFragmentShader&&"builtin"!==t.outVariableType&&!this._transformFeedbackNames.has(t.outVariableName)&&!this._usedInFragmentShader.has(t.node.uid)}setEmit(t,e){this._nodeEmitMap.set(t.uid,e)}getEmit(t){return this._nodeEmitMap.get(t.uid)}inputs(){return this._inputShaderTypesByNodeUid.values()}getInput(t){return this._inputShaderTypesByNodeUid.get(t.uid)}*rootOutputNodes(){for(const t of this._outputShaderTypes)yield t}*nodes(){const t=[];for(const e of this._outputShaderTypes.values())t.push(e.node);for(;t.length;){const e=t.pop();"number"!=typeof e&&"boolean"!=typeof e&&t.push(...e.children.filter(Boolean)),yield e}}*nodesOfTypeOrFunction(){for(const t of this.nodes())"number"!=typeof t&&"boolean"!=typeof t&&(yield t)}createSubgraphContext(){const t=this.clone();return t.body="",t.indent=this.indent+2,t._nodeEmitMap=new Map(this._nodeEmitMap),t}clone(){const t=new k([],this._outputShaderTypes,this._transformFeedbackBindings,this._usedInFragmentShader);return t._inputShaderTypesByNodeUid=this._inputShaderTypesByNodeUid,t.indent=this.indent,t.body=this.body,t.varCount=this.varCount,t._nodeEmitMap=this._nodeEmitMap,t}insertVertexShader(t){t.vertex.code.add(""),this._insertInputs(t,"vertex"),t.vertex.code.add(""),t.vertex.code.add("// OUTPUTS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this.rootOutputNodes()){const n="builtin"===e.outVariableType;this.shouldPruneOutputNode(e)||(n?t.vertex.code.add(`// ${e.outVariableType.padEnd(7)} ${e.node.type.padEnd(9)} ${e.outVariableName};`):t.vertex.code.add(`${e.outVariableType.padEnd(10)} ${e.node.type.padEnd(9)} ${e.outVariableName};`))}t.vertex.code.add(""),t.vertex.code.add("void main() {"),t.vertex.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())this.shouldPruneOutputNode(e)||t.vertex.code.add(`  ${e.outVariableName} = ${e.variableName};`);t.vertex.code.add("}")}insertFragmentShader(t){this._insertInputs(t,"fragment"),t.fragment.code.add(""),t.fragment.code.add("void main() {"),t.fragment.code.add("  "+this.body.split("\n").join("\n  "));for(const e of this.rootOutputNodes())"discard"===e.outVariableType?(t.fragment.code.add("  // TODO: Should ensure codegen for discard appears first in fragment shader"),t.fragment.code.add(`  if (${e.variableName}) {`),t.fragment.code.add("    discard;"),t.fragment.code.add("  }"),t.fragment.code.add("  ")):t.fragment.code.add(`  ${e.outVariableName} = ${e.variableName};`);t.fragment.code.add("}")}_insertInputs(t,e){t[e].code.add("// INPUTS: "),t[e].code.add("// --------------------------------------------------------- ");for(const n of this.inputs())n.isUsed&&"builtin"!==n.variableInputType&&("array"===n.node.type?t[e].code.add(`${n.variableInputType.padEnd(10)} ${n.node.elementType.type.padEnd(9)} ${n.variableName}[${n.node.size}];`):t[e].code.add(`${n.variableInputType.padEnd(10)} ${n.node.type.padEnd(9)} ${n.variableName};`))}}var T=n(98783);function $(t){return new t}function A(t,e,n){const r=t.constructor[e]??[];t.constructor.hasOwnProperty(e)||Object.defineProperty(t.constructor,e,{value:r.slice()}),t.constructor[e].push(n)}function F(t,e){return(n,r)=>{A(n,"locations",{typeCtor:e,propertyKey:r,parameterIndex:null,index:t})}}const V=t=>(e,n)=>{A(e,"builtins",{builtin:t,propertyKey:n})},z=t=>(e,n,r)=>{A(e,"inputs",{inputCtor:t,propertyKey:n,parameterIndex:r})},N=t=>(e,n)=>{A(e,"uniforms",{typeCtor:t,propertyKey:n})},D=t=>(e,n)=>{A(e,"options",{typeCtor:t,propertyKey:n})},O=(t,e)=>{A(t,"defines",{propertyKey:e})};const L=(t,e)=>(n,r)=>{n.constructor.builtins.push({builtin:t,propertyKey:r,typeCtor:e})};class E{}E.builtins=[],(0,r._)([L("gl_VertexID",w.Ai)],E.prototype,"glVertexID",void 0);class U{}class R{}R.builtins=[],(0,r._)([L("gl_FragCoord",w.Zb)],R.prototype,"glFragCoord",void 0),(0,r._)([L("gl_PointCoord",w.ZY)],R.prototype,"glPointCoord",void 0);class K{}(0,r._)([V("gl_FragColor")],K.prototype,"glFragColor",void 0);class B{constructor(){this.type="uniform-group"}get _uniforms(){return this.constructor.uniforms??[]}}class Z{constructor(){this.logShader=!1,this.computeAttributes={}}get vertexInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&0===t.parameterIndex));if(!t)throw new Error("Unable to find vertex input parameter");return t}get computeInput(){return this._shaderModuleClass.inputs.findLast((t=>"vertex"===t.propertyKey&&1===t.parameterIndex))}get fragmentInput(){const t=this._shaderModuleClass.inputs.findLast((t=>"fragment"===t.propertyKey));if(!t)throw new Error("Unable to find fragment input parameter");return t}get transformFeedbackBindings(){return this.fragmentInput.inputCtor.transformFeedbackBindings??[]}get locations(){return[...this.vertexInput.inputCtor.locations,...this.computeInput?.inputCtor.locations??[]]}get locationsMap(){const t=new Map,e=new Set;for(const n of this.locations)e.has(n.index)?i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.GraphShaderModule").warnOnce("mapview-rendering",`Unable to assigned attribute ${n.propertyKey} to ${n.index}. Index already in use`,{locationsMap:t}):(t.set(n.propertyKey,n.index),e.add(n.index));return t}get locationInfo(){if(!this._locationInfo){const t=this.locationsMap,e=Array.from(t.entries()).map((([t,e])=>`${t}.${e}`)).join("."),n=(0,o.Wm)(e),r=this.computeAttributes;this._locationInfo={hash:n,locations:t,computeAttributeMap:r}}return this._locationInfo}get renamedLocationsMap(){const t=new Map;for(const e of this.locations)t.set("a_"+e.propertyKey,e.index);return t}get optionPropertyKeys(){if(!this._optionPropertyKeys){const t=new Set;for(const e of this._options)t.add(e.propertyKey);this._optionPropertyKeys=t}return this._optionPropertyKeys}get _shaderModuleClass(){return this.constructor}get _defines(){return this._shaderModuleClass.defines??[]}get _options(){return this._shaderModuleClass.options??[]}get _uniforms(){return this._shaderModuleClass.uniforms??[]}getProgram(t,e,n,r){try{const{vertex:i,fragment:o,uniformBindings:s}=this._generateShaders(t,e,n,r);return new T.K(i,o,this.renamedLocationsMap,this.locationInfo,s,this.transformFeedbackBindings)}catch(P){return new T.K("","",this.renamedLocationsMap,this.locationInfo,[],this.transformFeedbackBindings)}}getDebugUniformClassInfo(t){const e=this._options.find((e=>e.propertyKey===t));if(e)return{type:"option",className:e.typeCtor};const n=this._uniforms.find((e=>e.propertyKey===t));if(!n)throw new Error(`Unable to find uniform class type for property: ${t}`);return{type:"required",className:n.typeCtor}}getShaderKey(t,e,n,r){const i=Object.keys(t).map((e=>`${e}.${t[e]}`)).join("."),o=Object.keys(n).map((t=>`${t}.${n[t]}`)).join("."),s=Object.keys(r).map((t=>`${t}.${r[t]}`)).join("."),u=Object.keys(e).filter((t=>this.optionPropertyKeys.has(t)&&e[t])).join(".");return`${this.constructor.name}.${i}.${o}.${s}.${u}`}_generateShaders(t,e,n,r){const i=[];this._setDefines(n),this._setOptionalUniforms(i,e),this._setRequiredUniforms(i);const o=this._hydrateVertexInput(r),s=this._injectPackPrecisionFactor(o,t),u=this._hydrateComputeInput(),a=u&&this._injectComputePackPrecisionFactor(u,t),c=this.vertex(s,a),l=this._hydrateFragmentInput(c),d=this.fragment(l),p=new Set;for(const _ in d){const t=d[_];(0,C.rz)(p,t)}const f=this._getVertexInputBuiltins(),h=k.createVertex({...o,...u},c,f,i,this.transformFeedbackBindings,p);(new I).write(h);const y=this._getFragmentInputBuiltins(d);y.set("glPointCoord","gl_PointCoord");const m=k.createFragment(l,d,y,i,h,this.transformFeedbackBindings);(new I).write(m);const g=this._createShaderBuilder(h,m),v=g.generate("vertex",!1),b=g.generate("fragment",!1);return this.logShader&&(console.log(v),console.log(b)),{vertex:v,fragment:b,uniformBindings:i}}_setDefines(t){for(const e in t)this[e]=t[e]}_setOptionalUniforms(t,e){for(const n of this._options)e[n.propertyKey]?this[n.propertyKey]=this._hydrateUniformGroup(t,n):this[n.propertyKey]=null}_setRequiredUniforms(t){for(const e of this._uniforms)this[e.propertyKey]=this._hydrateUniformGroup(t,e)}_hydrateUniformGroup(t,e){const n=new(0,e.typeCtor);for(const r of n._uniforms??[]){const i=$(r.typeCtor),o=`u_${e.propertyKey}_${r.propertyKey}`,s=i.type,u=[e.propertyKey,r.propertyKey].join(".");if("type"in r.typeCtor&&"array"===r.typeCtor.type){const e=i;t.push({shaderModulePath:u,uniformName:o,uniformType:s,uniformArrayLength:e.size,uniformArrayElementType:e.elementType.type,uniformHydrated:i})}else t.push({shaderModulePath:u,uniformName:o,uniformType:s,uniformHydrated:i});n[r.propertyKey]=i}return n}_hydrateVertexInput(t){const e=this.vertexInput.inputCtor,n=e.locations.reduce(((e,n)=>!1===t[n.propertyKey]?e:{...e,[n.propertyKey]:$(n.typeCtor)}),{});for(const{propertyKey:r,typeCtor:i}of e.builtins){const t=$(i);n[r]=t}return n}_hydrateComputeInput(){return null==this.computeInput?null:this.computeInput.inputCtor.locations.reduce(((t,e)=>({...t,[e.propertyKey]:$(e.typeCtor)})),{})}_injectPackPrecisionFactor(t,e){const n={};for(const r in t){const i=t[r],o=e[r];if(o){if("float"!==i.type&&"vec2"!==i.type&&"vec3"!==i.type&&"vec4"!==i.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${i.type}`);n[r]=i.divide(new w.nt(o))}else n[r]=i}return n}_injectComputePackPrecisionFactor(t,e){const n={},r=new Map;for(const i in this.computeAttributes)for(const t of this.computeAttributes[i]??[])r.set(t,i);for(const i in t){const o=t[i],s=r.get(i);if(!s)continue;const u=e[s];if(u){if("float"!==o.type&&"vec2"!==o.type&&"vec3"!==o.type&&"vec4"!==o.type)throw new Error(`InternalError: packPrecisionFactor requires GenType, but found ${o.type}`);n[i]=o.divide(new w.nt(u))}else n[i]=o}return n}_hydrateFragmentInput(t){const e={};for(const n in t)e[n]=t[n];for(const{propertyKey:n,typeCtor:r}of R.builtins){const t=$(r);e[n]=t}return e}_getVertexInputBuiltins(){const t=this.vertexInput.inputCtor,e=new Map;for(const{builtin:n,propertyKey:r}of t.builtins)e.set(r,n);return e}_getFragmentInputBuiltins(t){const e=t.constructor,n=new Map;for(const r of e.builtins??[])n.set(r.propertyKey,r.builtin);return n}_createShaderBuilder(t,e){const n=new d;return this._insertDebugInfo(n),t.insertVertexShader(n),e.insertFragmentShader(n),n}_insertDebugInfo(t){t.vertex.code.add("// DEFINES: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._defines)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`);t.vertex.code.add(""),t.vertex.code.add("// OPTIONS: "),t.vertex.code.add("// --------------------------------------------------------- ");for(const e of this._options)this[e.propertyKey]?t.vertex.code.add(`//   ${e.propertyKey}: true`):t.vertex.code.add(`//   ${e.propertyKey}: false`)}}},72649:function(t,e,n){n.d(e,{XL:function(){return l},aw:function(){return p},rR:function(){return d},rz:function(){return i},vA:function(){return s},vL:function(){return u},zg:function(){return c}});n(44114);function r(t){return t.split(" ").map(((t,e)=>e>0?t.charAt(0).toUpperCase()+t.slice(1):t)).join("")}function i(t,e){const n=[];for(n.push(e);n.length;){const e=n.pop();if("object"==typeof e&&!t.has(e.uid)){t.add(e.uid);for(const t of e.children)n.push(t)}}}class o{constructor(){this.uid=o.NodeCount++,this._debugName=null,this._isMutable=!1,this.isImplicit=!1}get isMutable(){return this._isMutable}setMutable(){return this._isMutable=!0,this}setDebugName(t){return t=r(t),this._debugName=t,this.isImplicit&&this.children[0]instanceof o&&this.children[0].setDebugName(t),this}get debugInfo(){return{name:this._debugName??""}}cloneInto(t){t._debugName=this._debugName,t._isMutable=this._isMutable,t.isImplicit=this.isImplicit,t.uid=this.uid}}function s(t){return"object"==typeof t?t.clone():t}o.NodeCount=0;class u extends o{constructor(){super(...arguments),this.shaderType="primitive-node"}}class a extends o{constructor(t){super(),this.child=t,this.shaderType="scope-node"}get children(){return[this.child]}clone(){const t=new a(s(this.child));return this.cloneInto(t),t}}class c extends o{constructor(t,e,n){super(),this.property=t,this.target=e,this.returnType=n,this.shaderType="property-access-node"}get children(){const t=[this.target];return"string"!=typeof this.property&&t.push(this.property),t}clone(){const t=new c(this.property,s(this.target),this.returnType);return this.cloneInto(t),t}}class l extends o{constructor(t,e,n){super(),this.condition=t,this.ifTrue=e,this.ifFalse=n,this.shaderType="condition-node"}get children(){return[this.condition,this.ifTrue,this.ifFalse]}clone(){const t=s(this.ifTrue),e=this.ifFalse?s(this.ifFalse):null,n=new l(this.condition,t,e);return this.cloneInto(n),n}}class d extends o{constructor(t,e,n,r){super(),this.captureList=t,this.returnType=e,this.generator=r,this.shaderType="block-node",n&&(this.subgraph=new a(n))}get children(){return Object.keys(this.captureList).map((t=>this.captureList[t])).concat(this.subgraph??[])}clone(){const t={};for(const n in this.captureList)t[n]=s(this.captureList[n]);const e=new d(t,this.returnType,this.subgraph?s(this.subgraph.child):this.subgraph,this.generator);return this.cloneInto(e),e}}class p extends o{constructor(t,e,n,r,i,o=!1){super(),this.token=t,this._children=e,this.isInfix=n,this.isPropertyAccess=r,this.returnType=i,this.isTernary=o,this.shaderType="function-node"}get children(){return this._children}clone(){const t=new p(this.token,this._children.map(s),this.isInfix,this.isPropertyAccess,this.returnType,this.isTernary);return this.cloneInto(t),t}}},9808:function(t,e,n){n.d(e,{$5:function(){return bt},$I:function(){return G},AU:function(){return Kt},Ai:function(){return U},Bw:function(){return Dt},F8:function(){return Bt},Io:function(){return Ft},LC:function(){return gt},MM:function(){return _t},My:function(){return C},Om:function(){return Vt},PM:function(){return jt},RI:function(){return zt},S8:function(){return Rt},Sj:function(){return yt},T9:function(){return Ot},TF:function(){return Zt},Tk:function(){return ct},U:function(){return j},US:function(){return Gt},Uo:function(){return It},Wh:function(){return Y},Xe:function(){return vt},ZY:function(){return k},Zb:function(){return $},Zc:function(){return q},aX:function(){return wt},eB:function(){return T},eR:function(){return X},fV:function(){return W},gn:function(){return At},j1:function(){return lt},jc:function(){return Nt},jh:function(){return Et},jk:function(){return Lt},ln:function(){return J},mk:function(){return Tt},nf:function(){return mt},nt:function(){return P},or:function(){return xt},qE:function(){return $t},tn:function(){return St},w0:function(){return Q},x:function(){return N},z7:function(){return S},ze:function(){return ot},zi:function(){return Ut}});var r,i,o,s,u,a,c,l,d,p,f,h,y,m,g=n(40399),v=n(72649);function b(t){const e=[["float","vec2","vec3","vec4"],["int","ivec2","ivec3","ivec4"],["uint","uvec2","uvec3","uvec4"],["bool","bvec2","bvec3","bvec4"]];for(const n of e)if(n.includes(t))return n.map((t=>H[t]));throw new Error("Unable to find type family")}function _(t){return new Proxy(t,{get(e,n){if("constructor"===n)return new Proxy(e.constructor,{construct:(t,e,n)=>_(new t(...e))});if(n in e)return e[n];if("string"==typeof n){const e=b(t.type);return tt(t,n,e[n.length-1])}}})}function w(t){return new Proxy(t,{construct:(t,e,n)=>_(new t(...e))})}function x(t){return new Proxy(t,{get(e,n){if(n in e)return e[n];if("string"==typeof n){const e=parseInt(n,10);if(!isNaN(e))return tt(t,`[${e}]`,t.elementType.constructor)}}})}function M(t){return new Proxy(t,{construct:(t,e,n)=>x(new t(...e))})}class I extends Error{}let C=r=class extends v.vL{constructor(t,e){super(),this.elementType=t,this.size=e,this.children=[],this.type="array"}clone(){const t=new r(this.elementType,this.size);return super.cloneInto(t),t}get(t){if("number"==typeof t){const e=new U(t);return e.isImplicit=!0,tt(this,e,this.elementType.constructor)}return tt(this,t,this.elementType.constructor)}last(){return this.get(this.size-1)}first(){return this.get(0)}findIndex(t,e,n){return ut(this,t,e,n)}glslFindIndex(t,e,n){return at(this,t,e,n)}static ofType(t,e){const n={construct:(n,i)=>new r(new t,e)};return new Proxy(r,n)}};C.type="array",C=r=(0,g._)([M],C);class S extends v.vL{constructor(){super(...arguments),this.type="sampler2D",this.children=[]}clone(){const t=new S;return t.children=this.children.map(v.vA),super.cloneInto(t),t}}S.type="sampler2D";class P extends v.vL{constructor(t){super(),this.type="float",this.children=[t]}clone(){const t=new P((0,v.vA)(this.children[0]));return super.cloneInto(t),t}multiply(t){return dt(this,"number"==typeof t?L(t,P):t)}divide(t){return pt(this,"number"==typeof t?L(t,P):t)}add(t){return ft(this,"number"==typeof t?L(t,P):t)}subtract(t){return ht(this,"number"==typeof t?L(t,P):t)}}P.type="float";let k=i=class extends v.vL{constructor(t,e){super(),this.type="vec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new i((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]));return super.cloneInto(t),t}get 0(){return tt(this,"[0]",P)}get 1(){return tt(this,"[1]",P)}get 2(){throw new I}get 3(){throw new I}multiply(t){return dt(this,"number"==typeof t?L(t,P):t)}divide(t){return pt(this,"number"==typeof t?L(t,P):t)}add(t){return ft(this,"number"==typeof t?L(t,P):t)}subtract(t){return ht(this,"number"==typeof t?L(t,P):t)}};k.type="vec2",k=i=(0,g._)([w],k);let T=o=class extends v.vL{constructor(t,e,n){super(),this.type="vec3",this.children=[t,e,n].filter((t=>null!=t))}get 0(){return tt(this,"[0]",P)}get 1(){return tt(this,"[1]",P)}get 2(){return tt(this,"[2]",P)}get 3(){throw new I}clone(){const t=new o((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]));return super.cloneInto(t),t}multiply(t){return dt(this,"number"==typeof t?L(t,P):t)}divide(t){return pt(this,"number"==typeof t?L(t,P):t)}add(t){return ft(this,"number"==typeof t?L(t,P):t)}subtract(t){return ht(this,"number"==typeof t?L(t,P):t)}};T.type="vec3",T=o=(0,g._)([w],T);let $=s=class extends v.vL{constructor(t,e,n,r){super(),this.type="vec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new s((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]));return super.cloneInto(t),t}get 0(){return tt(this,"[0]",P)}get 1(){return tt(this,"[1]",P)}get 2(){return tt(this,"[2]",P)}get 3(){return tt(this,"[3]",P)}multiply(t){return dt(this,"number"==typeof t?L(t,P):t)}divide(t){return pt(this,"number"==typeof t?L(t,P):t)}add(t){return ft(this,"number"==typeof t?L(t,P):t)}subtract(t){return ht(this,"number"==typeof t?L(t,P):t)}};$.type="vec4",$=s=(0,g._)([w],$);let A=u=class extends v.vL{constructor(t){super(),this.type="uint",this.children=[t]}clone(){const t=new u((0,v.vA)(this.children[0]));return super.cloneInto(t),t}};A.type="uint",A=u=(0,g._)([w],A);let F=a=class extends v.vL{constructor(t,e){super(),this.type="uvec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new a((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]));return super.cloneInto(t),t}};F.type="uvec2",F=a=(0,g._)([w],F);let V=c=class extends v.vL{constructor(t,e,n){super(),this.type="uvec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new c((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]));return super.cloneInto(t),t}};V.type="uvec3",V=c=(0,g._)([w],V);let z=l=class extends v.vL{constructor(t,e,n,r){super(),this.type="uvec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new l((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]));return super.cloneInto(t),t}};z.type="uvec4",z=l=(0,g._)([w],z);class N extends v.vL{constructor(t){super(),this.type="bool",this.children=[t]}and(t){return It(this,t)}or(t){return xt(this,t)}clone(){const t=new N((0,v.vA)(this.children[0]));return super.cloneInto(t),t}}N.type="bool";let D=d=class extends v.vL{constructor(t,e){super(),this.type="bvec2",this.children=[t,e].filter((t=>null!=t))}all(){return Pt(this)}any(){return kt(this)}clone(){const t=new d((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]));return super.cloneInto(t),t}};D.type="bvec2",D=d=(0,g._)([w],D);let O=p=class extends v.vL{constructor(t,e,n){super(),this.type="bvec3",this.children=[t,e,n].filter((t=>null!=t))}all(){return Pt(this)}any(){return kt(this)}clone(){const t=new p((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]));return super.cloneInto(t),t}};function L(t,e){return"number"==typeof t?new e(t):t}O.type="bvec3",O=p=(0,g._)([w],O);let E=f=class extends v.vL{constructor(t,e,n,r){super(),this.type="bvec4",this.children=[t,e,n,r].filter((t=>null!=t))}all(){return Pt(this)}any(){return kt(this)}clone(){const t=new f((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]));return super.cloneInto(t),t}};E.type="bvec4",E=f=(0,g._)([w],E);class U extends v.vL{constructor(t){super(),this.type="int",this.children=[t]}multiply(t){return dt(this,L(t,U))}add(t){return ft(this,L(t,U))}subtract(t){return ht(this,L(t,U))}divide(t){return pt(this,L(t,U))}clone(){const t=new U((0,v.vA)(this.children[0]));return super.cloneInto(t),t}}U.type="int";let R=h=class extends v.vL{constructor(t,e){super(),this.type="ivec2",this.children=[t,e].filter((t=>null!=t))}clone(){const t=new h((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]));return super.cloneInto(t),t}};R.type="ivec2",R=h=(0,g._)([w],R);let K=y=class extends v.vL{constructor(t,e,n){super(),this.type="ivec3",this.children=[t,e,n].filter((t=>null!=t))}clone(){const t=new y((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]));return super.cloneInto(t),t}};K.type="ivec3",K=y=(0,g._)([w],K);let B=m=class extends v.vL{constructor(t,e,n,r){super(),this.type="ivec4",this.children=[t,e,n,r].filter((t=>null!=t))}clone(){const t=new m((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]));return super.cloneInto(t),t}};B.type="ivec4",B=m=(0,g._)([w],B);class Z extends v.vL{constructor(t,e,n,r){super(),this.type="mat2",this.children=[t,e,n,r]}clone(){const t=new Z((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]));return super.cloneInto(t),t}}Z.type="mat2";class j extends v.vL{static identity(){return new j(1,0,0,0,1,0,0,0,1)}static fromRotation(t){const e=Bt(t),n=At(t);return new j(n,e,0,ot(e),n,0,0,0,1)}constructor(t,e,n,r,i,o,s,u,a){super(),this.type="mat3",this.children=[t,e,n,r,i,o,s,u,a]}add(t){return ft(this,t)}multiply(t){return dt(this,t)}clone(){const t=new j((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]),(0,v.vA)(this.children[4]),(0,v.vA)(this.children[5]),(0,v.vA)(this.children[6]),(0,v.vA)(this.children[7]),(0,v.vA)(this.children[8]));return super.cloneInto(t),t}}j.type="mat3";class G extends v.vL{static identity(){return new G(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}constructor(t,e,n,r,i,o,s,u,a,c,l,d,p,f,h,y){super(),this.type="mat4",this.children=[t,e,n,r,i,o,s,u,a,c,l,d,p,f,h,y]}static fromColumns(t,e,n,r){return new G(t.x,t.y,t.z,t.w,e.x,e.y,e.z,e.w,n.x,n.y,n.z,n.w,r.x,r.y,r.z,r.w)}multiply(t){return dt(this,t)}clone(){const t=new G((0,v.vA)(this.children[0]),(0,v.vA)(this.children[1]),(0,v.vA)(this.children[2]),(0,v.vA)(this.children[3]),(0,v.vA)(this.children[4]),(0,v.vA)(this.children[5]),(0,v.vA)(this.children[6]),(0,v.vA)(this.children[7]),(0,v.vA)(this.children[8]),(0,v.vA)(this.children[9]),(0,v.vA)(this.children[10]),(0,v.vA)(this.children[11]),(0,v.vA)(this.children[12]),(0,v.vA)(this.children[13]),(0,v.vA)(this.children[14]),(0,v.vA)(this.children[15]));return super.cloneInto(t),t}}G.type="mat4";const H={float:P,vec2:k,vec3:T,vec4:$,int:U,ivec2:R,ivec3:K,ivec4:B,uint:A,uvec2:F,uvec3:V,uvec4:z,bool:N,bvec2:D,bvec3:O,bvec4:E},Y=(...t)=>new U(...t),W=(...t)=>new P(...t),q=(...t)=>new k(...t),X=(...t)=>new T(...t),J=(...t)=>new $(...t),Q=(...t)=>new j(...t);function tt(t,e,n){const r=new n(new v.zg(e,t,n));return r.isImplicit=!0,r}function et(t,e,n,r=null){if(r){const i=new r,o=new r(new v.aw(t,[e,n],!0,!1,i));return o.isImplicit=!0,o}if("float"===e.type||"int"===e.type){const r=new n.constructor(new v.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}if(("mat2"===e.type||"mat3"===e.type||"mat4"===e.type)&&"float"!==n.type){const r=new n.constructor(new v.aw(t,[e,n],!0,!1,n.constructor));return r.isImplicit=!0,r}const i=new e.constructor(new v.aw(t,[e,n],!0,!1,e.constructor));return i.isImplicit=!0,i}function nt(t,e,n=e.constructor){const r=new n(new v.aw(t,[e],!1,!1,n));return r.isImplicit=!0,r}function rt(t,e,n,r=e.constructor){const i=new r(new v.aw(t,[e,n],!1,!1,r));return i.isImplicit=!0,i}function it(t,e,n,r,i=e.constructor){const o=new i(new v.aw(t,[e,n,r],!1,!1,i));return o.isImplicit=!0,o}function ot(t){return dt(t,W(-1))}function st(t,e,n,r){return new e(new v.rR(t,e,n,r))}function ut(t,e,n=0,r=t.size){const i=new U(n).setMutable().setDebugName("FindIndexIterator"),o=e(t.get(i)).setDebugName("FindIndexPredicate"),s=st({iter:i},U,o,(({out:t,iter:e,subgraph:n})=>`\n${t} = -1;\n\nfor (; ${e} < ${r}; ${e}++) {\n\n${n.body}\n\n  if (${n.varName}) {\n    ${t} = ${e};\n    break;\n  }\n\n}\n`)).setDebugName("FindIndexBlock");return s}function at(t,e,n=0,r=t.size){const i=st({array:t},U,null,(({out:t,array:i})=>`\n${t} = -1;\nfor (int i = ${n}; i < ${r}; i++) {\n  bool condition;\n  ${e({array:i,i:"i",out:"condition"})}\n  if (condition) {\n    ${t} = i;\n    break;\n  }\n}\n`)).setDebugName("GlslFindIndexBlock");return i}function ct(t,e,n){const r="function"==typeof e?e():e,i="function"==typeof n?n():n,o=new r.constructor(new v.XL(t,r,i));return o.isImplicit=!0,o}function lt(...t){const e=t.map((([t,e])=>"function"==typeof e?[t,e()]:[t,e])),n=e[0][1].constructor,r=e.findIndex((t=>!0===t[0]));if(-1===r)throw new Error("A cond must have a fallthrough case with `true`/; ");const i=e.slice(0,r),o=e[r][1],s=new n(i.reduceRight(((t,e)=>ct(e[0],e[1],t)),o));return s.isImplicit=!0,s}function dt(t,e){return et("*",t,e)}function pt(t,e){return et("/",t,e)}function ft(t,e){return et("+",t,e)}function ht(t,e){return et("-",t,e)}function yt(t,e){return et(">>",t,e)}function mt(t,e){return et("&",t,e)}function gt(t,e){return et("==",t,e,N)}function vt(t,e){return et("<",t,e,N)}function bt(t,e){return et("<=",t,e,N)}function _t(t,e){return et(">",t,e,N)}function wt(t,e){return et(">=",t,e,N)}function xt(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Mt(t,e)),t[0])}function Mt(t,e){return et("||",t,e,N)}function It(...t){return t.length<=1?t[0]:t.slice(1).reduce(((t,e)=>Ct(t,e)),t[0])}function Ct(t,e){return et("&&",t,e,N)}function St(t){return nt("abs",t)}function Pt(t){return nt("all",t,N)}function kt(t){return nt("any",t,N)}function Tt(t){return nt("ceil",t)}function $t(t,e,n){return it("clamp",t,e,n,t.constructor)}function At(t){return nt("cos",t)}function Ft(t,e){return rt("distance",t,e,P)}function Vt(t,e){return rt("dot",t,e,P)}function zt(t){return nt("floor",t)}function Nt(t){return nt("fract",t)}function Dt(t){return nt("length",t,P)}function Ot(t,e){return rt("max",t,e)}function Lt(t,e){return rt("min",t,e)}function Et(t,e,n){return it("mix",t,e,n)}function Ut(t,e){return rt("mod",t,e)}function Rt(t){return nt("normalize",t)}function Kt(t){return"bool"===t.type?nt("!",t):nt("not",t)}function Bt(t){return nt("sin",t)}function Zt(t,e,n){return it("smoothstep",t,e,n)}function jt(t,e){return rt("step",t,e,e.constructor)}function Gt(t,e){return rt("texture2D",t,e,$)}},93119:function(t,e,n){var r;n.d(e,{N:function(){return r}}),function(t){t[t.Fill=0]="Fill",t[t.PatternFill=1]="PatternFill",t[t.ComplexFill=2]="ComplexFill",t[t.OutlineFill=3]="OutlineFill",t[t.PatternOutlineFill=4]="PatternOutlineFill",t[t.ComplexOutlineFill=5]="ComplexOutlineFill",t[t.Marker=6]="Marker",t[t.PieChart=7]="PieChart",t[t.Line=8]="Line",t[t.TexturedLine=9]="TexturedLine",t[t.Text=10]="Text",t[t.Label=11]="Label",t[t.Heatmap=12]="Heatmap",t[t.DotDensity=13]="DotDensity",t[t.Test=14]="Test"}(r||(r={}))},81578:function(t,e,n){n.d(e,{c:function(){return r}});const r={bitset:{isSDF:0,isMapAligned:1,scaleSymbolsProportionally:2,overrideOutlineColor:3,colorLocked:4}}},27302:function(t,e,n){n.d(e,{f_:function(){return m},$Z:function(){return h},DM:function(){return y},rz:function(){return f}});var r=n(40399),i=n(66242),o=n(80748),s=n(9808),u=n(9302),a=n(62797);class c extends o.k2{getVisualVariableData(t){if(!this._vvData){const e=this.getAttributeDataCoords(t);this._vvData=(0,s.US)(this.visualVariableData,e).setDebugName("storage2")}return this._vvData}getAttributeDataCoords(t){if(!this._uv){const e=(0,a.Kt)(t),n=this.size,r=(0,s.Wh)(e.x),i=(0,s.Wh)(e.y).multiply((0,s.Wh)(256)),o=(0,s.Wh)(e.z).multiply((0,s.Wh)(256)).multiply((0,s.Wh)(256)),u=(0,s.fV)(r.add(i).add(o)),c=(0,s.zi)(u,n),l=u.subtract(c).divide(n);this._uv=new s.ZY(c,l).add(.5).divide(n)}return this._uv}getFilterData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.filterFlags,e).setDebugName("storage0")}getAnimationData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.animation,e).setDebugName("storage1")}getVVData(t){return this.getVisualVariableData(t)}getDataDrivenData0(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven0,e).setDebugName("storage30")}getDataDrivenData1(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven1,e).setDebugName("storage31")}getDataDrivenData2(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.dataDriven2,e).setDebugName("storage32")}getGPGPUData(t){const e=this.getAttributeDataCoords(t);return(0,s.US)(this.gpgpu,e).setDebugName("storage4")}getFilterFlags(t){return(0,u.A)("webgl-ignores-sampler-precision")?(0,s.mk)(this.getFilterData(t).x.multiply((0,s.fV)(255))):this.getFilterData(t).x.multiply((0,s.fV)(255))}getAnimationValue(t){return this.getAnimationData(t).x}getSizeValue(t){return this.getVisualVariableData(t).x}getColorValue(t){return this.getVisualVariableData(t).y}getOpacityValue(t){return this.getVisualVariableData(t).z}getRotationValue(t){return this.getVisualVariableData(t).w}}(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"filterFlags",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"animation",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"gpgpu",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"visualVariableData",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"dataDriven0",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"dataDriven1",void 0),(0,r._)([(0,o.Pi)(s.z7)],c.prototype,"dataDriven2",void 0),(0,r._)([(0,o.Pi)(s.nt)],c.prototype,"size",void 0);class l extends o.k2{}(0,r._)([(0,o.Pi)(s.nt)],l.prototype,"activeReasons",void 0),(0,r._)([(0,o.Pi)(s.nt)],l.prototype,"highlightAll",void 0);class d extends o.k2{}(0,r._)([(0,o.Pi)(s.ZY)],d.prototype,"position",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"distance",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"smallSymbolDistance",void 0),(0,r._)([(0,o.Pi)(s.nt)],d.prototype,"smallSymbolSizeThreshold",void 0);var p=n(45455);class f extends o.ZA{}(0,r._)([(0,o.C5)(0,s.eB)],f.prototype,"id",void 0),(0,r._)([(0,o.C5)(1,s.nt)],f.prototype,"bitset",void 0),(0,r._)([(0,o.C5)(2,s.ZY)],f.prototype,"pos",void 0);class h extends o.Y7{}(0,r._)([(0,o.C5)(14,s.ZY)],h.prototype,"nextPos1",void 0),(0,r._)([(0,o.C5)(15,s.ZY)],h.prototype,"nextPos2",void 0);class y extends o.HS{}class m extends o.A{clip(t,e){let n=new s.nt(0);const r=this.storage.getFilterFlags(t);if(n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract((0,a.i6)(r,0)))),this.inside?n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract((0,a.i6)(r,1)))):this.outside?n=n.add((0,s.fV)(2).multiply((0,a.i6)(r,1))):this.highlight&&(n=n.add((0,s.fV)(2).multiply((0,s.fV)(1).subtract(this._checkHighlight(r))))),null!=e){const t=new s.nt(1).subtract((0,s.PM)(e.x,this.view.currentZoom)),r=(0,s.PM)(e.y,this.view.currentZoom);n=n.add(new s.nt(2).multiply(t.add(r)))}return n}getFragmentOutput(t,e,n=new s.nt(1/255)){const r=new o.mm;return r.glFragColor=this._maybeWriteHittest(e)??this._maybeHighlight(t,n)??t,r}_maybeHighlight(t,e){return this.highlight?new s.Zb(t.rgb,(0,s.PM)(e,t.a)):null}_checkHighlight(t){let e=this._checkHighlightBit(t,0);for(let n=1;n<i.M$.length;n++)e=e.add(this._checkHighlightBit(t,n));return(0,s.PM)(new s.nt(.1),e.add(this.highlight.highlightAll))}_checkHighlightBit(t,e){return(0,a.yS)(t,e).multiply((0,a.mh)(this.highlight.activeReasons,e))}maybeRunHittest(t,e,n){if(null==this.hittestRequest)return null;const r=this.hittest(t,e,n);let i=(0,s.Tk)((0,s.MM)(r,this.hittestRequest.distance),new s.nt(2),new s.nt(0));const o=this.storage.getAttributeDataCoords(t.id),u=(0,a.nb)(o);i=i.add(this.clip(t.id,t.zoomRange));const c=new s.Zb(new s.nt(1/255),0,0,0);return{glPointSize:new s.nt(1),glPosition:new s.Zb(u,i,1),color:c}}_maybeWriteHittest(t){return null!=this.hittestRequest?t.color:null}}(0,r._)([o.E8],m.prototype,"inside",void 0),(0,r._)([o.E8],m.prototype,"outside",void 0),(0,r._)([(0,o.uK)(l)],m.prototype,"highlight",void 0),(0,r._)([(0,o.Pi)(c)],m.prototype,"storage",void 0),(0,r._)([(0,o.Pi)(p.o)],m.prototype,"view",void 0),(0,r._)([(0,o.uK)(d)],m.prototype,"hittestRequest",void 0)},14456:function(t,e,n){n.d(e,{Bh:function(){return m},KP:function(){return y},Ps:function(){return g}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(72937),a=n(33366),c=n(4792),l=n(79870),d=n(62797);class p extends a._{}(0,r._)([(0,i.C5)(5,o.Zb)],p.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(6,o.nt)],p.prototype,"width",void 0),(0,r._)([(0,i.C5)(7,o.nt)],p.prototype,"height",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],p.prototype,"offset",void 0),(0,r._)([(0,i.C5)(9,o.ZY)],p.prototype,"scale",void 0),(0,r._)([(0,i.C5)(10,o.nt)],p.prototype,"angle",void 0);class f extends s.DM{}function h(t,e,n,r,i){const s=(0,o.LC)((0,d.mh)(i,u.Fz),(0,o.fV)(1)),a=(0,d.Rj)(new o.Zb(t,0));return(0,o.Tk)(s,(0,o.w0)(r.divide(e.x),n.divide(e.y),0,(0,o.ze)(n.divide(e.x)),r.divide(e.y),0,(0,d._9)((0,o.Zc)(a,0)),(0,d._9)((0,o.Zc)(0,a)),1),(0,o.w0)(r.divide(e.x),n.divide(e.y),0,(0,o.ze)(n.divide(e.x)),r.divide(e.y),0,0,0,1))}function y(t,e){const n=t.view.requiredZoomFactor,r=new o.ZY(e.width,e.height),i=r.multiply(e.scale).multiply(n),s=e.angle.multiply(u.rp),a=(0,o.F8)(s),c=(0,o.gn)(s),l=h(e.id,i,a,c,e.bitset),p=t.localTileOffset.getPatternOffsetAtTileOrigin(r,a,c),f=n.multiply(e.scale).multiply(e.offset.subtract(p)).divide(i),y=new o.eB(e.pos,1),m=l.multiply(y).xy.subtract(f),g=e.tlbr.divide(t.mosaicInfo.size.xyxy);let v=(0,d.mh)(e.bitset,u.cn);return null!=t.visualVariableColor&&(v=(0,o.Tk)((0,d.M8)(t.storage.getColorValue(e.id)),new o.nt(0),v)),{tileTextureCoord:m,tlbr:g,sampleAlphaOnly:v}}function m(t,e){const n=(0,o.zi)(e.tileTextureCoord,new o.nt(1)),r=(0,o.jh)(e.tlbr.xy,e.tlbr.zw,n);let i=(0,o.US)(t.mosaicInfo.texture,r);return i=(0,o.Tk)((0,o.MM)(e.sampleAlphaOnly,new o.nt(.5)),i.aaaa,i),e.color.multiply(i)}class g extends a.z{vertex(t,e){return{...super.vertex(t,e),...y(this,t)}}fragment(t){const e=m(this,t);return this.getFragmentOutput(e,t,new o.nt(0))}}(0,r._)([(0,i.Pi)(l.b)],g.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(c.P)],g.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(p)),(0,r.a)(1,(0,i.hF)(s.$Z))],g.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(f))],g.prototype,"fragment",null)},5572:function(t,e,n){n.d(e,{RH:function(){return b},cZ:function(){return h},v9:function(){return m}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(14456),a=n(22952),c=n(8089),l=n(4792),d=n(79870),p=n(43998),f=n(23450);const h=16,y=1/h,m=128;class g extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],g.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.Zb)],g.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(5,o.nt)],g.prototype,"angle",void 0),(0,r._)([(0,i.C5)(6,o.nt)],g.prototype,"aux1",void 0),(0,r._)([(0,i.C5)(7,o.nt)],g.prototype,"aux2",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],g.prototype,"aux3",void 0),(0,r._)([(0,i.C5)(9,o.ZY)],g.prototype,"aux4",void 0),(0,r._)([(0,i.C5)(10,o.ZY)],g.prototype,"zoomRange",void 0);class v extends f.A1{}class b extends p.My{vertex(t,e){const{aux1:n,aux2:r,aux3:i,aux4:s}=t,a={...t,width:n,height:r,offset:i,scale:s.multiply(y)},c={...t,halfWidth:n,referenceHalfWidth:r,offset:i,normal:s.subtract(m).multiply(y)},l=(0,p.Yb)(this,c),d=(0,u.KP)(this,a),f=(0,o.MM)(l.isOutline,new o.nt(.5));return{...l,...d,...this.maybeRunHittest(t,e,f)}}fragment(t){const{isOutline:e}=t,n=(0,o.MM)(e,new o.nt(.5)),r=(0,c.o7)(t,this.antialiasingControls.blur),i=(0,u.Bh)(this,t),s=(0,o.Tk)(n,r,i),a=(0,o.Tk)(n,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,a)}hittest(t,e,n){return(0,o.Tk)(n,(0,a.My)(this.hittestRequest),(0,a.Lq)(this,t,e))}}(0,r._)([(0,i.Pi)(d.b)],b.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(l.P)],b.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(g)),(0,r.a)(1,(0,i.hF)(s.$Z))],b.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(v))],b.prototype,"fragment",null)},33366:function(t,e,n){n.d(e,{_:function(){return d},z:function(){return p}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(22952),a=n(8431),c=n(69409),l=n(75141);class d extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],d.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.ZY)],d.prototype,"zoomRange",void 0);class p extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=(0,l.cF)(this,t.id),r=(0,l.G7)(this,t.id,t.color).multiply(n),i=this.view.displayViewScreenMat3.multiply(new o.eB(t.pos.xy,1)),s=this.clip(t.id,t.zoomRange);return{glPosition:new o.Zb(i.xy,s,1),color:r,...this.maybeRunHittest(t,e,null)}}fragment(t){return this.getFragmentOutput(t.color,t,new o.nt(0))}hittest(t,e){return(0,u.Lq)(this,t,e)}}(0,r._)([(0,i.uK)(a._)],p.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(c.i)],p.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(d)),(0,r.a)(1,(0,i.hF)(s.$Z))],p.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(s.DM))],p.prototype,"fragment",null)},8089:function(t,e,n){n.d(e,{$0:function(){return x},Xc:function(){return m},cM:function(){return I},fF:function(){return g},fg:function(){return v},o7:function(){return M},xw:function(){return _}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(72937),a=n(22952),c=n(8431),l=n(69409),d=n(91068),p=n(89428),f=n(67166),h=n(20512),y=n(75141);class m extends s.rz{}(0,r._)([(0,i.C5)(3,o.Zb)],m.prototype,"color",void 0),(0,r._)([(0,i.C5)(4,o.ZY)],m.prototype,"offset",void 0),(0,r._)([(0,i.C5)(5,o.ZY)],m.prototype,"normal",void 0),(0,r._)([(0,i.C5)(6,o.nt)],m.prototype,"halfWidth",void 0),(0,r._)([(0,i.C5)(7,o.nt)],m.prototype,"referenceHalfWidth",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],m.prototype,"zoomRange",void 0);class g extends s.DM{}class v extends i.k2{}function b(t){return(0,o.T9)(new o.nt(u.Fb).multiply((0,o.PM)(t,new o.nt(u.J5))),new o.nt(1))}function _(t,e){const{halfWidth:n,normal:r}=t,i=b(n),s=(0,o.Bw)(r).multiply(n);return(0,o.qE)(i.multiply(n.subtract(s)).divide(e.add(i).subtract(new o.nt(1))),new o.nt(0),new o.nt(1))}function w(t,e){const{id:n,halfWidth:r,referenceHalfWidth:i}=e;if((0,y.G5)(t)){const e=new o.nt(2).multiply(i),s=(0,y.Mg)(t,n,e);return new o.nt(.5).multiply(r.divide((0,o.T9)(i,new o.nt(u.Ni)))).multiply(s)}return r}function x(t,e){const{id:n,offset:r,pos:i,normal:s,zoomRange:u}=e,{displayViewScreenMat3:a,displayViewMat3:c}=t.view,l=(0,y.G7)(t,n,e.color),d=(0,y.cF)(t,n),p=w(t,e),f=new o.nt(.5).multiply(t.antialiasingControls.antialiasing),h=(0,o.T9)(p.add(f),new o.nt(.45)).add(new o.nt(.1).multiply(f)),m=b(h).multiply(h).multiply(r),g=c.multiply(new o.eB(m,new o.nt(0))),v=a.multiply(new o.eB(i,new o.nt(1))).add(g),_=new o.nt(2).multiply((0,o.PM)(p,new o.nt(0))).add(t.clip(n,u)),x=new o.Zb(v.xy,_,1);return{color:l,opacity:d,halfWidth:h,normal:s,scaledOffset:m,scaledHalfWidth:p,glPosition:new o.Zb(x.xy,_,1)}}function M(t,e){const{opacity:n,color:r}=t,i=_(t,e);return n.multiply(r).multiply(i)}(0,r._)([(0,i.Pi)(o.nt)],v.prototype,"antialiasing",void 0),(0,r._)([(0,i.Pi)(o.nt)],v.prototype,"blur",void 0);class I extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}vertex(t,e){const n=x(this,t);return{...n,...this.maybeRunHittest(t,e,n.halfWidth)}}fragment(t){const e=M(t,this.antialiasingControls.blur);return this.getFragmentOutput(e,t)}hittest(t,e,n){const{viewMat3:r,tileMat3:i}=this.view,s=r.multiply(i),u=s.multiply(new o.eB(t.pos,1)),c=s.multiply(new o.eB(e.nextPos1,1)),l=s.multiply(new o.eB(e.nextPos2,1)),{distance:d,smallSymbolDistance:p,smallSymbolSizeThreshold:f}=this.hittestRequest,h=(0,o.PM)(n,f.multiply(.5)).multiply(d.subtract(p)),y=this.hittestRequest.position;return(0,o.jk)((0,a.E2)(y,u.xy,c.xy),(0,a.E2)(y,u.xy,l.xy)).subtract(n).add(h)}}(0,r._)([(0,i.Pi)(v)],I.prototype,"antialiasingControls",void 0),(0,r._)([(0,i.uK)(c._)],I.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(l.i)],I.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,i.uK)(d.n)],I.prototype,"visualVariableSizeMinMaxValue",void 0),(0,r._)([(0,i.uK)(p.F)],I.prototype,"visualVariableSizeScaleStops",void 0),(0,r._)([(0,i.uK)(f.N)],I.prototype,"visualVariableSizeStops",void 0),(0,r._)([(0,i.uK)(h.d)],I.prototype,"visualVariableSizeUnitValue",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(m)),(0,r.a)(1,(0,i.hF)(s.$Z))],I.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(g))],I.prototype,"fragment",null)},4792:function(t,e,n){n.d(e,{P:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(72937);class u extends i.k2{getPatternOffsetAtTileOrigin(t,e=new o.nt(0),n=new o.nt(1)){const r=new o.ZY(s.YV).divide(t);let i=t.multiply((0,o.jc)(this.maxIntsToLocalOrigin.multiply(r))).add(this.tileOffsetFromLocalOrigin).subtract(new o.nt(.5).multiply(t));return i=new o.ZY(i.x.multiply(n).subtract(i.y.multiply(e)),i.x.multiply(e).add(i.y.multiply(n))),(0,o.zi)(i,t)}}(0,r._)([(0,i.Pi)(o.ZY)],u.prototype,"tileOffsetFromLocalOrigin",void 0),(0,r._)([(0,i.Pi)(o.ZY)],u.prototype,"maxIntsToLocalOrigin",void 0)},79870:function(t,e,n){n.d(e,{b:function(){return s}});var r=n(40399),i=n(80748),o=n(9808);class s extends i.k2{}(0,r._)([(0,i.Pi)(o.ZY)],s.prototype,"size",void 0),(0,r._)([(0,i.Pi)(o.z7)],s.prototype,"texture",void 0)},43998:function(t,e,n){n.d(e,{A7:function(){return b},My:function(){return w},Yb:function(){return _},nj:function(){return x},wG:function(){return v}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(72937),a=n(22952),c=n(8089),l=n(62797),d=n(8431),p=n(69409),f=n(91068),h=n(89428),y=n(67166),m=n(20512),g=n(75141);class v extends s.rz{}(0,r._)([(0,i.C5)(3,o.ZY)],v.prototype,"offset",void 0),(0,r._)([(0,i.C5)(4,o.Zb)],v.prototype,"color",void 0),(0,r._)([(0,i.C5)(5,o.ZY)],v.prototype,"normal",void 0),(0,r._)([(0,i.C5)(6,o.nt)],v.prototype,"halfWidth",void 0),(0,r._)([(0,i.C5)(7,o.nt)],v.prototype,"referenceHalfWidth",void 0),(0,r._)([(0,i.C5)(8,o.ZY)],v.prototype,"zoomRange",void 0);class b extends c.fF{}function _(t,e,n){const{id:r,bitset:i}=e,s=(0,l.mh)(i,u.Xx),a=(0,o.MM)(s,new o.nt(.5)),d=(0,c.$0)(t,e),p=(0,o.Tk)(a,d.halfWidth,new o.nt(0)),f=(0,g.cF)(t,r),h=(0,g.G7)(t,r,e.color),y=(0,o.Tk)(a,e.color,h.multiply(f)),m=t.view.displayViewScreenMat3.multiply(new o.eB(e.pos.xy,1)),v=t.clip(e.id),b=new o.Zb(m.xy,v,1),_=(0,o.Tk)(a,d.glPosition,b),w=n&&t.maybeRunHittest(e,n,a);return{isOutline:s,color:y,opacity:new o.nt(1),halfWidth:p,normal:d.normal,glPosition:_,...w}}class w extends s.f_{constructor(){super(...arguments),this.computeAttributes={pos:["nextPos1","nextPos2"]}}}(0,r._)([(0,i.Pi)(c.fg)],w.prototype,"antialiasingControls",void 0),(0,r._)([(0,i.uK)(d._)],w.prototype,"visualVariableColor",void 0),(0,r._)([(0,i.uK)(p.i)],w.prototype,"visualVariableOpacity",void 0),(0,r._)([(0,i.uK)(f.n)],w.prototype,"visualVariableSizeMinMaxValue",void 0),(0,r._)([(0,i.uK)(h.F)],w.prototype,"visualVariableSizeScaleStops",void 0),(0,r._)([(0,i.uK)(y.N)],w.prototype,"visualVariableSizeStops",void 0),(0,r._)([(0,i.uK)(m.d)],w.prototype,"visualVariableSizeUnitValue",void 0);class x extends w{vertex(t,e){return _(this,t,e)}fragment(t){const{color:e,isOutline:n}=t,r=(0,o.MM)(n,new o.nt(.5)),i=(0,c.o7)(t,this.antialiasingControls.blur),s=(0,o.Tk)(r,i,e),u=(0,o.Tk)(r,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,u)}hittest(t,e,n){return(0,o.Tk)(n,(0,a.My)(this.hittestRequest),(0,a.Lq)(this,t,e))}}(0,r._)([(0,r.a)(0,(0,i.hF)(v)),(0,r.a)(1,(0,i.hF)(s.$Z))],x.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(b))],x.prototype,"fragment",null)},70794:function(t,e,n){n.d(e,{_u:function(){return f},dW:function(){return h},vx:function(){return y}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(33366),a=n(4792),c=n(79870);class l extends u._{}(0,r._)([(0,i.C5)(5,o.Zb)],l.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(6,o.nt)],l.prototype,"inverseRasterizationScale",void 0);class d extends s.DM{}function p(t){const e=new o.nt(1),n=new o.nt(0);return new o.U(e.divide(t.x),n.divide(t.y),0,(0,o.ze)(n.divide(t.x)),e.divide(t.y),0,0,0,1)}function f(t,e){const n=e.tlbr.xy,r=e.tlbr.zw,i=r.x.subtract(n.x),s=n.y.subtract(r.y),u=new o.ZY(i,s).multiply(e.inverseRasterizationScale),a=u.multiply(t.view.requiredZoomFactor),c=p(a),l=t.localTileOffset.getPatternOffsetAtTileOrigin(u).divide(a),d=new o.eB(e.pos,1);return{tileTextureCoord:c.multiply(d).xy.subtract(l),tlbr:e.tlbr.divide(t.mosaicInfo.size.xyxy)}}function h(t,e){const n=(0,o.zi)(t.tileTextureCoord,new o.nt(1)),r=(0,o.jh)(t.tlbr.xy,t.tlbr.zw,n),i=(0,o.US)(e.texture,r);return t.color.multiply(i)}class y extends u.z{vertex(t,e){return{...super.vertex(t,e),...f(this,t)}}fragment(t){const e=h(t,this.mosaicInfo);return this.getFragmentOutput(e,t,new o.nt(0))}}(0,r._)([(0,i.Pi)(c.b)],y.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(a.P)],y.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(l)),(0,r.a)(1,(0,i.hF)(s.$Z))],y.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(d))],y.prototype,"fragment",null)},23450:function(t,e,n){n.d(e,{A1:function(){return f},tA:function(){return h}});var r=n(40399),i=n(80748),o=n(9808),s=n(27302),u=n(8089),a=n(4792),c=n(79870),l=n(43998),d=n(70794);class p extends l.wG{}(0,r._)([(0,i.C5)(9,o.Zb)],p.prototype,"tlbr",void 0),(0,r._)([(0,i.C5)(10,o.nt)],p.prototype,"inverseRasterizationScale",void 0);class f extends l.A7{}class h extends l.nj{vertex(t,e){return{...(0,l.Yb)(this,t,e),...(0,d._u)(this,t)}}fragment(t){const{isOutline:e}=t,n=(0,o.MM)(e,new o.nt(.5)),r=(0,u.o7)(t,this.antialiasingControls.blur),i=(0,d.dW)(t,this.mosaicInfo),s=(0,o.Tk)(n,r,i),a=(0,o.Tk)(n,new o.nt(1/255),new o.nt(0));return this.getFragmentOutput(s,t,a)}}(0,r._)([(0,i.Pi)(c.b)],h.prototype,"mosaicInfo",void 0),(0,r._)([(0,i.Pi)(a.P)],h.prototype,"localTileOffset",void 0),(0,r._)([(0,r.a)(0,(0,i.hF)(p)),(0,r.a)(1,(0,i.hF)(s.$Z))],h.prototype,"vertex",null),(0,r._)([(0,r.a)(0,(0,i.hF)(f))],h.prototype,"fragment",null)},45455:function(t,e,n){n.d(e,{o:function(){return s}});var r=n(40399),i=n(80748),o=n(9808);class s extends i.k2{}(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayViewScreenMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayViewMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"displayMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"viewMat3",void 0),(0,r._)([(0,i.Pi)(o.U)],s.prototype,"tileMat3",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"displayZoomFactor",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"requiredZoomFactor",void 0),(0,r._)([(0,i.Pi)(o.ZY)],s.prototype,"tileOffset",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"currentScale",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"currentZoom",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"metersPerSRUnit",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"rotation",void 0),(0,r._)([(0,i.Pi)(o.nt)],s.prototype,"pixelRatio",void 0)},8431:function(t,e,n){n.d(e,{_:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(62797);class u extends i.k2{getColor(t,e,n){return(0,o.j1)([(0,o.or)((0,s.M8)(t),n),e],[(0,o.$5)(t,this.values.first()),this.colors.first()],[(0,o.aX)(t,this.values.last()),this.colors.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.colors.get(r),this.colors.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.Zb,8))],u.prototype,"colors",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],u.prototype,"values",void 0)},69409:function(t,e,n){n.d(e,{i:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(62797);class u extends i.k2{getOpacity(t){return(0,o.j1)([(0,s.M8)(t),new o.nt(1)],[(0,o.$5)(t,this.opacityValues.first()),this.opacities.first()],[(0,o.aX)(t,this.opacityValues.last()),this.opacities.last()],[!0,()=>{const e=this.opacityValues.findIndex((e=>(0,o.MM)(e,t))),n=this.opacityValues.get(e),r=e.subtract(1),i=this.opacityValues.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.opacities.get(r),this.opacities.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],u.prototype,"opacities",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],u.prototype,"opacityValues",void 0)},91068:function(t,e,n){n.d(e,{n:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(62797);class u extends i.k2{getSize(t,e){const n=this.minMaxValueAndSize.xy,r=this.minMaxValueAndSize.zw;return(0,o.Tk)((0,s.M8)(t),e,(()=>{const e=t.subtract(n.x).divide(n.y.subtract(n.x)),i=(0,o.qE)(e,new o.nt(0),new o.nt(1));return r.x.add(i.multiply(r.y.subtract(r.x)))}))}}(0,r._)([(0,i.Pi)(o.Zb)],u.prototype,"minMaxValueAndSize",void 0)},89428:function(t,e,n){n.d(e,{F:function(){return s}});var r=n(40399),i=n(80748),o=n(9808);class s extends i.k2{getSizeForViewScale(t){return(0,o.j1)([(0,o.$5)(t,this.values.first()),this.sizes.first()],[(0,o.aX)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.sizes.get(r),this.sizes.get(e),s)}])}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],s.prototype,"sizes",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],s.prototype,"values",void 0)},67166:function(t,e,n){n.d(e,{N:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(62797);class u extends i.k2{getSize(t,e){const n=(0,o.j1)([(0,s.M8)(t),e],[(0,o.$5)(t,this.values.first()),this.sizes.first()],[(0,o.aX)(t,this.values.last()),this.sizes.last()],[!0,()=>{const e=this.values.findIndex((e=>(0,o.MM)(e,t))),n=this.values.get(e),r=e.subtract(1),i=this.values.get(r),s=t.subtract(i).divide(n.subtract(i));return(0,o.jh)(this.sizes.get(r),this.sizes.get(e),s)}]);return(0,o.Tk)((0,s.M8)(n),e,n)}}(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],u.prototype,"sizes",void 0),(0,r._)([(0,i.Pi)(o.My.ofType(o.nt,8))],u.prototype,"values",void 0)},20512:function(t,e,n){n.d(e,{d:function(){return u}});var r=n(40399),i=n(80748),o=n(9808),s=n(62797);class u extends i.k2{getSize(t,e){return(0,o.Tk)((0,s.M8)(t),e,t.multiply(this.unitValueToPixelsRatio))}}(0,r._)([(0,i.Pi)(o.nt)],u.prototype,"unitValueToPixelsRatio",void 0)},72937:function(t,e,n){var r;n.d(e,{$w:function(){return l},Fb:function(){return u},Fz:function(){return m},H_:function(){return r},J5:function(){return a},M:function(){return p},Ni:function(){return d},V5:function(){return s},Xx:function(){return y},YV:function(){return w},au:function(){return c},b5:function(){return v},bg:function(){return b},cn:function(){return h},kx:function(){return g},os:function(){return i},qM:function(){return f},rp:function(){return o},ti:function(){return _}}),function(t){t[t.Geographic=0]="Geographic",t[t.Arithmatic=1]="Arithmatic"}(r||(r={}));const i=3.14159265359/180,o=3.14159265359/128,s=1,u=1.1,a=1,c=24,l=8,d=1e-5,p=.05,f=1e-30,h=4,y=0,m=2,g=2,v=3,b=0,_=3,w=16777216},22952:function(t,e,n){n.d(e,{Bo:function(){return d},Bs:function(){return c},E2:function(){return u},Lq:function(){return f},My:function(){return p},g$:function(){return h},kW:function(){return a}});var r=n(9808),i=n(72937),o=n(62797);function s(t,e){return(0,r.Om)(t,(0,r.S8)(e))}function u(t,e,n){const i=n.subtract(e),o=s(t.subtract(e),i),u=(0,r.qE)(o.divide((0,r.Bw)(i)),new r.nt(0),new r.nt(1));return(0,r.Io)(t,e.add(u.multiply(n.subtract(e))))}function a(t){const e=(0,r.tn)(t);return(0,r.PM)(e.x.add(e.y).add(e.z),new r.nt(1.05))}function c(t,e,n,i){const o=new r.U(n.x.multiply(i.y).subtract(i.x.multiply(n.y)),i.x.multiply(e.y).subtract(e.x.multiply(i.y)),e.x.multiply(n.y).subtract(n.x.multiply(e.y)),n.y.subtract(i.y),i.y.subtract(e.y),e.y.subtract(n.y),i.x.subtract(n.x),e.x.subtract(i.x),n.x.subtract(e.x)),s=e.x.multiply(n.y.subtract(i.y)),u=n.x.multiply(i.y.subtract(e.y)),a=i.x.multiply(e.y.subtract(n.y)),c=s.add(u).add(a);return new r.nt(1).divide(c).multiply(o.multiply(new r.eB(1,t)))}function l(t,e,n,i){return(0,r.LC)(a(c(t,e,n,i)),new r.nt(1))}function d(t,e,n,s){const a=n.subtract(e),c=s.subtract(e),d=(0,o.tL)(a,c),p=(0,r.Uo)((0,r.Xe)(d,new r.nt(i.M)),(0,r.MM)(d,new r.nt(-i.M)));return(0,r.j1)([(0,r.Uo)((0,r.AU)(p),l(t.xy,e,n,s)),new r.nt(-1)],[!0,()=>{const i=u(t,e,n),o=u(t,n,s),a=u(t,s,e);return(0,r.jk)((0,r.jk)(i,o),a)}])}function p(t){return t.distance.add(1)}function f(t,e,n){const{viewMat3:i,tileMat3:o}=t.view,s=i.multiply(o),u=s.multiply(new r.eB(e.pos,1)),a=s.multiply(new r.eB(n.nextPos1,1)),c=s.multiply(new r.eB(n.nextPos2,1));return d(t.hittestRequest.position,u.xy,a.xy,c.xy)}function h(t,e,n){return(0,r.Io)(t,n).subtract(e)}},62797:function(t,e,n){n.d(e,{K5:function(){return d},Kt:function(){return h},M8:function(){return u},Rj:function(){return y},_9:function(){return s},i6:function(){return p},mh:function(){return l},nb:function(){return c},tL:function(){return a},xf:function(){return m},yS:function(){return f}});var r=n(66242),i=n(9808),o=n(72937);function s(t){const e=(0,i.fV)(12.9898),n=(0,i.fV)(78.233),r=(0,i.fV)(43758.5453),o=(0,i.Om)(t,(0,i.Zc)(e,n)),s=(0,i.zi)(o,(0,i.fV)(3.14));return(0,i.jc)((0,i.F8)(s).multiply(r))}function u(t){return(0,i.LC)(t,(0,i.fV)(o.qM))}function a(t,e){return t.x.multiply(e.y).subtract(e.x.multiply(t.y))}function c(t){return t.multiply(2).subtract(1)}function l(t,e){const n=(0,i.fV)(2**e);return(0,i.zi)((0,i.RI)(t.divide(n)),(0,i.fV)(2))}function d(t,e){return(0,i.MM)(l(t,e),(0,i.fV)(.5))}function p(t,e){return l(t,e+r.M$.length)}function f(t,e){return l(t,e)}function h(t){const e=l(t.z,7),n=(0,i.fV)(1).subtract(e),r=t.xyz.subtract((0,i.eR)(0,0,(0,i.fV)(128)));return n.multiply(t).add(e.multiply(r))}function y(t){const e=(0,i.ln)(255/256,255/65536,255/16777216,255/4294967296);return(0,i.Om)(t,e)}function m(t){return(0,i.T9)((0,i.T9)((0,i.T9)(t.x,t.y),t.z),t.w)}},75141:function(t,e,n){n.d(e,{G5:function(){return i},G7:function(){return s},Mg:function(){return o},TL:function(){return a},cF:function(){return u}});var r=n(9808);function i(t){return null!=t.visualVariableSizeMinMaxValue||null!=t.visualVariableSizeScaleStops||null!=t.visualVariableSizeStops||null!=t.visualVariableSizeUnitValue}function o(t,e,n){if(i(t)){const r=t.storage.getSizeValue(e);return t.visualVariableSizeMinMaxValue?.getSize(r,n)??t.visualVariableSizeScaleStops?.getSizeForViewScale(t.view.currentScale)??t.visualVariableSizeStops?.getSize(r,n)??t.visualVariableSizeUnitValue?.getSize(r,n)}return n}function s(t,e,n,i=new r.x(!1)){if(null==t.visualVariableColor)return n;const o=t.storage.getColorValue(e);return t.visualVariableColor.getColor(o,n,i)}function u(t,e){if(null==t.visualVariableOpacity)return new r.nt(1);const n=t.storage.getOpacityValue(e);return t.visualVariableOpacity.getOpacity(n)}function a(t,e){if(null==t.visualVariableRotation)return r.U.identity();const n=t.storage.getRotationValue(e);return t.visualVariableRotation.getVVRotationMat3(n)}},98783:function(t,e,n){n.d(e,{K:function(){return l}});var r=n(18244),i=n(8660),o=n(3243),s=(n(95753),n(9302),n(78294),n(79721),n(74467),n(49343)),u=(n(4019),n(87501),n(56572));const a=()=>i.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.typed.TypedShaderProgram");function c(t,e,n){const i=e.length;if(i!==n){const o=new r.A("Invalid Uniform",`Invalid length, expected ${n} but got ${i}`,{uniformName:t,values:e});a().errorOnce(o)}}class l{constructor(t,e,n,r,i,o){this._program=null,this._vao=null,this._temporaryTextures=[],this.vertexShader=t,this.fragmentShader=e,this._locations=n,this._locationInfo=r,this._uniformBindings=i,this._transformFeedbackBindings=o}destroy(){this._program&&this._program.dispose(),this.cleanupTemporaryTextures()}get locations(){return this._locations}get locationInfo(){return this._locationInfo}setUniforms(t){this._uniforms=t}cleanupTemporaryTextures(){for(const t of this._temporaryTextures)t.dispose();this._temporaryTextures=[]}bind(t){const e=this._uniforms;if(!this._program){const e=new Map;for(const[t,r]of this._locations)e.set(t,r);const n=[];for(const t of this._transformFeedbackBindings??[]){const{index:e,propertyKey:r}=t;n[e]=`v_${r}`}this._program=new s.B(t,this.vertexShader,this.fragmentShader,e,new Map,n)}const n=this._program;t.useProgram(n);for(const r of this._uniformBindings){const{shaderModulePath:i,uniformName:s,uniformType:a,uniformArrayLength:l}=r,d=(0,o.wc)(i,e);if(null==d){if("sampler2D"===a)continue;throw new Error(`Failed to find uniform value for ${i}`)}switch("array"===a?r.uniformArrayElementType:a){case"sampler2D":{const{unit:e,texture:r}=d;if(n.setUniform1i(s,e),"type"in r)t.bindTexture(r,e);else{const n=(0,u.sZ)(t,r.descriptor,r.data);t.bindTexture(n,e)}break}case"int":if(!l){n.setUniform1i(s,d);break}c(r.uniformName,d,l),n.setUniform1iv(s,d);break;case"float":if(!l){n.setUniform1f(s,d);break}c(r.uniformName,d,l),n.setUniform1fv(s,d);break;case"vec2":if(!l){n.setUniform2f(s,d[0],d[1]);break}c(r.uniformName,d,l),n.setUniform2fv(s,d.flat());break;case"vec3":if(!l){n.setUniform3f(s,d[0],d[1],d[2]);break}c(r.uniformName,d,l),n.setUniform3fv(s,d.flat());break;case"vec4":if(!l){n.setUniform4f(s,d[0],d[1],d[2],d[3]);break}c(r.uniformName,d,l),n.setUniform4fv(s,d.flat());break;case"mat3":n.setUniformMatrix3fv(s,d.flat());break;case"mat4":n.setUniformMatrix4fv(s,d.flat());break;default:throw new Error(`Unable to set uniform for type ${a}`)}}}}},69505:function(t,e,n){n.d(e,{F:function(){return d}});var r=n(40399),i=n(13592),o=n(9302),s=n(85105),u=n(78574),a=n(36861),c=(n(8660),n(95753),n(39834)),l=n(19683);let d=class extends i.A{constructor(t){super(t),this.debugName="",this._updatingHandles=new l.U,this._idToUpdatingState=new s.A}get updating(){const t=this._updatingHandles.updating||Array.from(this._idToUpdatingState.values()).some((t=>t));if((0,o.A)("esri-2d-log-updating")){const e=Array.from(this._idToUpdatingState.entries()).map((([t,e])=>`-> ${t}: ${e}`)).join("\n");console.log(`${this.debugName}: Updating: ${t}\n-> Handles: ${this._updatingHandles.updating}\n${e}`)}return t}addUpdateTracking(t,e){const n=(0,u.wB)((()=>e.updating),(e=>this._idToUpdatingState.set(t,e)),{sync:!0});this.addHandles(n)}addPromise(t){return this._updatingHandles.addPromise(t)}};(0,r._)([(0,a.MZ)({constructOnly:!0})],d.prototype,"debugName",void 0),(0,r._)([(0,a.MZ)({readOnly:!0})],d.prototype,"updating",null),d=(0,r._)([(0,c.$)("esri.views.2d.layers.support.UpdateTracking2D")],d)},86989:function(t,e,n){var r;n.d(e,{c:function(){return r}}),function(t){t[t.Pass=0]="Pass",t[t.Draw=1]="Draw"}(r||(r={}))},24394:function(t,e,n){n.d(e,{O_:function(){return s},vA:function(){return o}});n(3009),n(88031);var r=n(43911);(0,r.vt)();class i{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function o(t,e){if(!t){e=e||"Assertion";const t=new Error(e).stack;throw new i(`${e} at ${t}`)}}function s(t,e,n,r){let i,o=(n[0]-t[0])/e[0],s=(r[0]-t[0])/e[0];o>s&&(i=o,o=s,s=i);let u=(n[1]-t[1])/e[1],a=(r[1]-t[1])/e[1];if(u>a&&(i=u,u=a,a=i),o>a||u>s)return!1;u>o&&(o=u),a<s&&(s=a);let c=(n[2]-t[2])/e[2],l=(r[2]-t[2])/e[2];return c>l&&(i=c,c=l,l=i),!(o>l||c>s)&&(l<s&&(s=l),!(s<0))}}}]);
//# sourceMappingURL=7647.fd7b0248.js.map