"use strict";(self["webpackChunkvue_arcgis_0905"]=self["webpackChunkvue_arcgis_0905"]||[]).push([[942],{46740:function(t,e,n){n.d(e,{A:function(){return r}});const i=2;class r{constructor(t=[],e=[],n=!1){this.lengths=t??[],this.coords=e??[],this.hasIndeterminateRingOrder=n}static fromJSON(t){return new r(t.lengths,t.coords,t.hasIndeterminateRingOrder)}static fromRect(t){const[e,n,i,s]=t,h=i-e,a=s-n;return new r([5],[e,n,h,0,0,a,-h,0,0,-a])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)t(this.coords[i*(n+e)],this.coords[i*(n+e)+1]);e+=r}}deltaDecode(){const t=this.clone(),{coords:e,lengths:n}=t;let i=0;for(const r of n){for(let t=1;t<r;t++)e[2*(i+t)]+=e[2*(i+t)-2],e[2*(i+t)+1]+=e[2*(i+t)-1];i+=r}return t}clone(t){if(0===this.lengths.length)return new r([],[this.coords[0],this.coords[1]]);const e=(0===this.lengths.length?1:this.lengths.reduce(((t,e)=>t+e)))*i,n=this.coords.slice(0,e);return t?(t.set(n),new r(this.lengths,t,this.hasIndeterminateRingOrder)):new r(Array.from(this.lengths),Array.from(n),this.hasIndeterminateRingOrder)}}},60266:function(t,e,n){n.d(e,{A:function(){return s}});var i=n(7736),r=n(55722);class s{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(t){return this._resourceMap.get(t)??null}async fetchResource(t,e){const n=this._resourceMap.get(t);if(n)return{width:n.width,height:n.height};let i=this._inFlightResourceMap.get(t);return i?i.then((t=>({width:t.width,height:t.height}))):(i=(0,r.M5)(t,e),this._inFlightResourceMap.set(t,i),i.then((e=>(this._inFlightResourceMap.delete(t),this._resourceMap.set(t,e),{width:e.width,height:e.height})),(()=>({width:0,height:0}))))}deleteResource(t){this._inFlightResourceMap.delete(t),this._resourceMap.delete(t)}loadFont(t){return(0,i.Al)(t)}}},60290:function(t,e,n){n.d(e,{previewCIMSymbol:function(){return x}});var i=n(22443),r=n(74233),s=n(60266),h=n(52519),a=n(28992),o=n(80139);const c=96/72;class u{constructor(t){this._spatialReference=t,this._imageDataCanvas=null,this._cimResourceManager=new s.A}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(t,e,n,i,s,h,c,u,g){if(!t)return null;const{data:f}=t;if(!f||"CIMSymbolReference"!==f.type||!f.symbol)return null;const{symbol:d}=f;h||(h=(0,o.n5)(d));const m=await a.$.resolveSymbolOverrides(f,e,this._spatialReference,s,h,c,u),y=this._cimResourceManager,w=[];r.wp.fetchResources(m,y,w),r.wp.fetchFonts(m,y,w),w.length>0&&await Promise.all(w);const{width:p,height:M}=n,b=l(h,p,M,i),x=r.wp.getEnvelope(m,b,y);if(!x)return null;let v=1,R=0,_=0;switch(d.type){case"CIMPointSymbol":case"CIMTextSymbol":{let t=1;x.width>p&&(t=p/x.width);let e=1;x.height>M&&(e=M/x.height),"preview"===i&&(x.width<p&&(t=p/x.width),x.height<M&&(e=M/x.height)),v=Math.min(t,e),R=x.x+x.width/2,_=x.y+x.height/2}break;case"CIMLineSymbol":{(g||x.height>M)&&(v=M/x.height),_=x.y+x.height/2;const t=x.x*v+p/2,e=(x.x+x.width)*v+p/2,{paths:n}=b;n[0][0][0]-=t/v,n[0][2][0]-=(e-p)/v}break;case"CIMPolygonSymbol":{R=x.x+x.width/2,_=x.y+x.height/2;const t=x.x*v+p/2,e=(x.x+x.width)*v+p/2,n=x.y*v+M/2,i=(x.y+x.height)*v+M/2,{rings:r}=b;t<0&&(r[0][0][0]-=t,r[0][3][0]-=t,r[0][4][0]-=t),n<0&&(r[0][0][1]+=n,r[0][1][1]+=n,r[0][4][1]+=n),e>p&&(r[0][1][0]-=e-p,r[0][2][0]-=e-p),i>M&&(r[0][2][1]+=i-M,r[0][3][1]+=i-M)}}const C={type:"cim",data:{type:"CIMSymbolReference",symbol:m}};return this.rasterize(C,p,M,R,_,v,h,1,b)}rasterize(t,e,n,i,r,s,a,u=0,g=null){const{data:f}=t;if(!f||"CIMSymbolReference"!==f.type||!f.symbol)return null;const{symbol:d}=f,m=this._canvas,y=(window.devicePixelRatio||1)*c;m.width=e*y,m.height=n*y,a||(a=(0,o.n5)(d)),g||(g=l(a,e,n,"legend")),m.width+=2*u,m.height+=2*u;const w=m.getContext("2d",{willReadFrequently:!0}),p=h.IT.createIdentity();return p.translate(-i,-r),p.scale(s*y,-s*y),p.translate(e*y/2+u,n*y/2+u),w.clearRect(0,0,m.width,m.height),new h.Rj(w,this._cimResourceManager,p,!0).drawSymbol(d,g),w.getImageData(0,0,m.width,m.height)}}function l(t,e,n,i){const r=1,s=-e/2+r,h=e/2-r,a=n/2-r,o=-n/2+r;switch(t){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[s,0],[0,0],[h,0]]]};default:return"legend"===i?{rings:[[[s,a],[h,0],[h,o],[s,o],[s,a]]]}:{rings:[[[s,a],[h,a],[h,o],[s,o],[s,a]]]}}}var g=n(59173),f=n(59643);const d=new u(null),m=(0,i.PN)(g.CB.size),y=(0,i.PN)(g.CB.maxSize),w=(0,i.PN)(g.CB.lineWidth),p=1;async function M(t,e,n){const i=e?.size;let r=null!=i&&"object"==typeof i&&"width"in i?i.width:i,s=null!=i&&"object"==typeof i&&"height"in i?i.height:i;if(null==r||null==s)if("esriGeometryPolygon"===n)r=m,s=m;else{const i=await b(t,e,n);i&&(r=i.width,s=i.height),"esriGeometryPolyline"===n&&(r=w),r=null!=r&&isFinite(r)?Math.min(r,y):m,s=null!=s&&isFinite(s)?Math.max(Math.min(s,y),p):m}return"legend"===e.style&&"esriGeometryPolyline"===n&&(r=w),{width:r,height:s}}async function b(t,e,n){const{feature:i,fieldMap:s,viewParams:h}=e.cimOptions||e,o=await a.$.resolveSymbolOverrides(t.data,i,null,s,n,null,h);if(!o)return null;(t=t.clone()).data={type:"CIMSymbolReference",symbol:o},t.data.primitiveOverrides=void 0;const c=[];return r.wp.fetchResources(o,d.resourceManager,c),r.wp.fetchFonts(o,d.resourceManager,c),c.length>0&&await Promise.all(c),r.wp.getEnvelope(o,null,d.resourceManager)}async function x(t,e={}){const{node:n,opacity:r,symbolConfig:s}=e,h=null!=s&&"object"==typeof s&&"isSquareFill"in s&&s.isSquareFill,a=e.cimOptions||e,c=a.geometryType||(0,o.n5)(t?.data?.symbol),u=await M(t,e,c),{feature:l,fieldMap:g}=a,m=h||"esriGeometryPolygon"!==c?"preview":"legend",y=await d.rasterizeCIMSymbolAsync(t,l,u,m,g,c,null,a.viewParams,a.allowScalingUp);if(!y)return null;const{width:w,height:p}=y,b=document.createElement("canvas");b.width=w,b.height=p,b.getContext("2d").putImageData(y,0,0);const x=(0,i.Lz)(u.width),v=(0,i.Lz)(u.height),R=new Image(x,v);R.src=b.toDataURL(),R.ariaLabel=e.ariaLabel??null,R.alt=e.ariaLabel??"",null!=r&&(R.style.opacity=`${r}`);let _=R;if(null!=e.effectView){const t={shape:{type:"image",x:0,y:0,width:x,height:v,src:R.src},fill:null,stroke:null,offset:[0,0]};_=(0,f.fz)([[t]],[x,v],{effectView:e.effectView,ariaLabel:e.ariaLabel})}return n&&_&&n.appendChild(_),_}},35206:function(t,e,n){n.d(e,{A:function(){return r}});n(44114);var i=n(1206);class r{constructor(t,e,n,r){this.computedX=0,this.computedY=0,this.center=(0,i.fA)(t,e),this.centerT=(0,i.vt)(),this.halfWidth=n/2,this.halfHeight=r/2,this.width=n,this.height=r}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(t){this.center[0]=t}set y(t){this.center[1]=t}clone(){return new r(this.x,this.y,this.width,this.height)}serialize(t){return t.writeF32(this.center[0]),t.writeF32(this.center[1]),t.push(this.width),t.push(this.height),t}findCollisionDelta(t,e=4){const n=Math.abs(t.centerT[0]-this.centerT[0]),i=Math.abs(t.centerT[1]-this.centerT[1]),r=(t.halfWidth+this.halfWidth+e)/n,s=(t.halfHeight+this.halfHeight+e)/i,h=Math.min(r,s);return Math.log2(h)}extend(t){const e=Math.min(this.xmin,t.xmin),n=Math.min(this.ymin,t.ymin),i=Math.max(this.xmax,t.xmax)-e,r=Math.max(this.ymax,t.ymax)-n,s=e+i/2,h=n+r/2;this.width=i,this.height=r,this.halfWidth=i/2,this.halfHeight=r/2,this.x=s,this.y=h}static deserialize(t){const e=t.readF32(),n=t.readF32(),i=t.readInt32(),s=t.readInt32();return new r(e,n,i,s)}}},42655:function(t,e,n){n.d(e,{$U:function(){return G},C2:function(){return c},CQ:function(){return r},CR:function(){return x},C_:function(){return V},Cp:function(){return v},DY:function(){return a},GR:function(){return J},Gh:function(){return D},LY:function(){return I},O5:function(){return N},Pq:function(){return u},Qb:function(){return q},Sr:function(){return M},TB:function(){return Q},V3:function(){return S},Vl:function(){return $},Xh:function(){return X},YS:function(){return g},YV:function(){return s},_M:function(){return z},_x:function(){return U},cp:function(){return K},dV:function(){return _},eG:function(){return o},eI:function(){return B},fq:function(){return E},fy:function(){return F},g0:function(){return P},hM:function(){return O},ie:function(){return A},ju:function(){return h},lL:function(){return y},mg:function(){return L},n9:function(){return p},nM:function(){return m},nW:function(){return k},p:function(){return W},qM:function(){return i},r1:function(){return j},sn:function(){return w},uM:function(){return f},ue:function(){return l},vN:function(){return R},vd:function(){return b},yA:function(){return H},yv:function(){return Y},z2:function(){return d}});const i=1e-30,r=512,s=16777216,h=8,a=29,o=24,c=4,u=0,l=0,g=0,f=1,d=2,m=3,y=4,w=5,p=6,M=12,b=5,x=6,v=5,R=6;var _;!function(t){t[t.FilterFlags=0]="FilterFlags",t[t.Animation=1]="Animation",t[t.GPGPU=2]="GPGPU",t[t.VV=3]="VV",t[t.DD0=4]="DD0",t[t.DD1=5]="DD1",t[t.DD2=6]="DD2"}(_||(_={}));const C=3,I=1<<C,P=I<<1,D=1.05,F=3,S=1,z=3,A=3,G=5,L=6,V=1.15,O=2,W=128,T=256,H=T-2*O,k=2,E=10,Y=1024,q=128,j=4,N=1,U=1<<20,B=.75,X=10,$=.75,Q=256,J=32,K=512}}]);
//# sourceMappingURL=942.cf03b683.js.map