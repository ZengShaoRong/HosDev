"use strict";(self["webpackChunkvue_arcgis_0905"]=self["webpackChunkvue_arcgis_0905"]||[]).push([[960],{960:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"data-mange padding15",staticStyle:{padding:"15px"}},[e("div",{staticClass:"top-main",staticStyle:{display:"flex",padding:"20px 0"}},[e("h1",{staticStyle:{margin:"0"}},[t._v("医疗设施数据列表")]),e("div",{staticClass:"botton-box",staticStyle:{display:"flex"}},[e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入医院名称关键词"},model:{value:t.typeSelect,callback:function(e){t.typeSelect=e},expression:"typeSelect"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchTypeClick},slot:"append"})],1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info"},on:{click:t.addClick}},[t._v("新增医院数据")])],1)]),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"450"}},[e("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"name",label:"医院名称",width:"300"}}),e("el-table-column",{attrs:{prop:"id",label:"医院编号",width:"120"}}),e("el-table-column",{attrs:{prop:"address",label:"地址"}}),e("el-table-column",{attrs:{prop:"jing",label:"经度",width:"120"}}),e("el-table-column",{attrs:{prop:"wei",label:"纬度",width:"120"}}),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.dleClick(a.row)}}},[t._v("删除")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.editClick(a.row)}}},[t._v("编辑")])]}}])})],1),e("el-dialog",{attrs:{title:"新增/编辑医院数据",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{model:t.form}},[e("el-form-item",{attrs:{label:"医院名称","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"医院地址","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),e("el-form-item",{attrs:{label:"坐标经度","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.jing,callback:function(e){t.$set(t.form,"jing",e)},expression:"form.jing"}})],1),e("el-form-item",{attrs:{label:"坐标纬度","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.wei,callback:function(e){t.$set(t.form,"wei",e)},expression:"form.wei"}})],1),e("el-form-item",{attrs:{label:"医院序列号","label-width":t.formLabelWidth}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.isPush}},[t._v("确 定")])],1)],1)],1)},l=[],s={data(){return{tableData:[],typeSelect:"",mainData:[],dialogFormVisible:!1,form:{name:"",address:"",jing:0,wei:0,id:"",_id:""},formLabelWidth:"120px"}},created(){this.getBaseData()},methods:{async dleClick(t){var e=null;e=await this.$axios.post("/BeiJingHospitalRemove/BeiJingHospitalRemove",t),200===e.status&&(this.$message("数据更新成功"),this.getBaseData())},async editClick(t){console.log(t),this.form=t,this.dialogFormVisible=!0},async addClick(){this.form={name:"",address:"",jing:0,wei:0,id:"",_id:""},this.dialogFormVisible=!0,this.haveIDString(10)},haveIDString(t){for(var e="0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i="",l=0;l<t;l++){var s=Math.floor(Math.random()*(e.length+a.length));i+=s<e.length?e[s]:a[s-e.length]}console.log("randomDigits",i),this.form.id=i},async isPush(){var t=null;0===this.form.jing||0===this.form.wei?alert("请确保经纬度数据格式正确"):""===this.form.name||""===this.form.address?alert("请确保医院基本数据完善"):t=""===this.form._id?await this.$axios.post("/BeiJingHospitalAddData/BeiJingHospitalAddData",{name:this.form.name,address:this.form.address,jing:this.form.jing,wei:this.form.wei,id:this.form.id}):await this.$axios.post("/BeiJingHospitalEditData/BeiJingHospitalEditData",{name:this.form.name,address:this.form.address,jing:this.form.jing,wei:this.form.wei,id:this.form.id,_id:this.form._id}),200===t.status&&(this.getBaseData(),this.$message({message:"医疗信息数据已更新",type:"success"}),this.dialogFormVisible=!1,this.typeSelect="")},async getBaseData(){var t=null;t=await this.$axios.get("/BeiJingHospitalGetData/BeiJingHospitalGetData"),console.log("baedata",t),this.tableData=t.data,this.mainData=t.data},searchTypeClick(){""===this.typeSelect?this.tableData=this.mainData:this.tableData=this.mainData.filter((t=>t.name.includes(this.typeSelect)))}}},o=s,r=a(81656),n=(0,r.A)(o,i,l,!1,null,"52a02827",null),d=n.exports}}]);
//# sourceMappingURL=960.dce9844c.js.map