"use strict";(self["webpackChunkvue_arcgis_0905"]=self["webpackChunkvue_arcgis_0905"]||[]).push([[3907],{63907:function(e,t,n){n.r(t),n.d(t,{registerFunctions:function(){return j}});n(44114);var r=n(61768),o=(n(32334),n(46963)),i=n(44093),a=n(50029),s=n(97460),u=n(92162),c=n(13597),p=n(40162),l=n(22193),d=n(45959),f=n(15350),h=n(7262),y=n(49497),w=n(17719),g=n(12980),m=n(5213),v=n(62700),A=n(74758),_=n(70616);let G=null;async function S(e){const t=r.A.geometryServiceUrl??"";if(!t){(0,p.isLoaded)()||await(0,p.load)();for(const t of e)t.container[t.indexer]=(0,p.project)(t.container[t.indexer],_.A.WGS84);return}const n=e.map((e=>e.container[e.indexer])),o=new A.A({geometries:n,outSpatialReference:_.A.WGS84}),i=await(0,h.C)(t,o);for(let r=0;r<i.length;r++){const t=e[r];t.container[t.indexer]=i[r]}}async function b(e,t){const r=new f["default"]({portal:e,id:t});return await r.load(),null===G&&(G=await n.e(2726).then(n.bind(n,22726))),await G.fetchKnowledgeGraph(r.url)}function R(e,t,n,r,o){if(null===e)return null;if((0,s.c)(e)||(0,s.b)(e))return e;if((0,s.k)(e))return e.toJSDate();if((0,s.k)(e))return e.toJSDate();if((0,s.m)(e))return e.toStorageFormat();if((0,s.n)(e))return e.toStorageString();if((0,s.v)(e)){const i={};for(const a of e.keys())i[a]=R(e.field(a),t,n,r,o),i[a]instanceof c.A&&o.push({container:i,indexer:a});return i}if((0,s.o)(e)){const i=e.map((e=>R(e,t,n,r,o)));for(let e=0;e<i.length;e++)i[e]instanceof c.A&&o.push({container:i,indexer:e});return i}return(0,s.p)(e)?e.spatialReference.isWGS84?e:e.spatialReference.isWebMercator&&t?(0,l.ci)(e):e:void 0}function k(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,l.Gh)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new a.D$(t,a.TX.WrongSpatialReference,null)}function x(e,t){if(!e)return null;const n={};for(const r in e)n[r]=M(e[r],t);return n}function M(e,t){return null===e?null:(0,s.o)(e)?e.map((e=>M(e,t))):e instanceof y.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:x(e.properties,t)}:e instanceof g.A?{graphType:"object",properties:x(e.properties,t)}:e instanceof v.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:e.originId??null,destinationId:e.destinationId??null,properties:x(e.properties,t)}:e instanceof m.A?{graphType:"path",path:e.path?e.path.map((e=>M(e,t))):null}:(0,s.p)(e)?k(e,t):(0,s.c)(e)||(0,s.b)(e)||(0,s.a5)(e)?e:null}function j(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,n){return e.standardFunctionAsync(t,n,((e,r,i)=>{if((0,s.H)(i,2,2,t,n),null===i[0])throw new a.D$(t,a.TX.PortalRequired,n);if(i[0]instanceof o.A){const e=(0,s.j)(i[1]);let n;return n=t.services?.portal?t.services.portal:d.A.getDefault(),b((0,u.R)(i[0],n),e)}if(!1===(0,s.c)(i[0]))throw new a.D$(t,a.TX.InvalidParameter,n);const c=(0,s.j)(i[0]);return b(t.services?.portal??d.A.getDefault(),c)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,r){return e.standardFunctionAsync(t,r,(async(e,o,u)=>{(0,s.H)(u,2,4,t,r);const c=u[0];if(!(0,s.w)(c))throw new a.D$(t,a.TX.InvalidParameter,r);const p=u[1];if(!(0,s.c)(p))throw new a.D$(t,a.TX.InvalidParameter,r);null===G&&(G=await n.e(2726).then(n.bind(n,22726)));let l=null;const d=(0,s.K)(u[2],null);if(!(d instanceof i.A||null===d))throw new a.D$(t,a.TX.InvalidParameter,r);if(d){let e=[];l=R(d,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await S(e)}const f=new w.A({openCypherQuery:p,bindParameters:l});(c?.serviceDefinition?.currentVersion??11.3)>11.2&&(f.outputSpatialReference=t.spatialReference);const h=(await G.executeQueryStreaming(c,f)).resultRowsStream.getReader(),y=[];try{for(;;){const{done:e,value:n}=await h.read();if(e)break;if((0,s.o)(n))for(const r of n)y.push(M(r,t));else{const e=[];for(const r of n)e.push(M(n[r],t));y.push(e)}}}catch(g){throw g}return i.A.convertJsonToArcade(y,(0,s.N)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},92162:function(e,t,n){n.d(t,{R:function(){return o}});var r=n(45959);function o(e,t){return null===e?t:new r.A({url:e.field("url")})}},49497:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(40399),o=(n(32334),n(36861)),i=(n(9302),n(8660),n(95753),n(39834)),a=n(67376),s=n(86743);let u=class extends a.A{constructor(e){super(e),this.layoutGeometry=null}};(0,r._)([(0,o.MZ)({type:s.A,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.Entity")],u);const c=u},67376:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(40399),o=n(36861),i=(n(9302),n(8660),n(95753),n(39834)),a=n(19687);let s=class extends a.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],s.prototype,"typeName",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],s.prototype,"id",void 0),s=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphNamedObject")],s);const u=s},19687:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(40399),o=n(17010),i=n(36861),a=(n(9302),n(8660),n(95753),n(39834));let s=class extends o.oY{constructor(e){super(e),this.properties=null}};(0,r._)([(0,i.MZ)({json:{write:!0}})],s.prototype,"properties",void 0),s=(0,r._)([(0,a.$)("esri.rest.knowledgeGraph.GraphObject")],s);const u=s},17719:function(e,t,n){n.d(t,{A:function(){return p}});var r=n(40399),o=n(36861),i=(n(9302),n(8660),n(95753),n(39834)),a=n(13592);let s=class extends a.A{constructor(e){super(e),this.openCypherQuery=""}};(0,r._)([(0,o.MZ)()],s.prototype,"openCypherQuery",void 0),s=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQuery")],s);const u=s;let c=class extends u{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null,this.provenanceBehavior=null}};(0,r._)([(0,o.MZ)()],c.prototype,"bindParameters",void 0),(0,r._)([(0,o.MZ)()],c.prototype,"bindGeometryQuantizationParameters",void 0),(0,r._)([(0,o.MZ)()],c.prototype,"outputQuantizationParameters",void 0),(0,r._)([(0,o.MZ)()],c.prototype,"outputSpatialReference",void 0),(0,r._)([(0,o.MZ)()],c.prototype,"provenanceBehavior",void 0),c=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],c);const p=c},12980:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(40399),o=(n(8660),n(9302),n(95753),n(18244),n(39834)),i=n(19687);let a=class extends i.A{constructor(e){super(e)}};a=(0,r._)([(0,o.$)("esri.rest.knowledgeGraph.ObjectValue")],a);const s=a},5213:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(40399),o=n(17010),i=n(36861),a=(n(9302),n(8660),n(95753),n(39834)),s=n(19687);let u=class extends o.oY{constructor(e){super(e),this.path=null}};(0,r._)([(0,i.MZ)({type:[s.A],json:{write:!0}})],u.prototype,"path",void 0),u=(0,r._)([(0,a.$)("esri.rest.knowledgeGraph.Path")],u);const c=u},62700:function(e,t,n){n.d(t,{A:function(){return c}});var r=n(40399),o=(n(32334),n(36861)),i=(n(9302),n(8660),n(95753),n(39834)),a=n(67376),s=n(93277);let u=class extends a.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"originId",void 0),(0,r._)([(0,o.MZ)({type:String,json:{write:!0}})],u.prototype,"destinationId",void 0),(0,r._)([(0,o.MZ)({type:s.A,json:{write:!0}})],u.prototype,"layoutGeometry",void 0),u=(0,r._)([(0,i.$)("esri.rest.knowledgeGraph.Relationship")],u);const c=u}}]);
//# sourceMappingURL=3907.13aa35f7.js.map